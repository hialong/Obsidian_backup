---
mindmap-plugin: rich
created: 2024-01-22
updated: 2024-01-22
Type: 总结
Status: ⌛️ 等待
tags:
---

# Redis知识结构
``` json
{"theme":"","mindData":[[{"id":"8a515b0d-5e32-cc41","text":"Redis知识结构","isRoot":true,"main":true,"x":4000,"y":4000,"isExpand":true,"layout":{"layoutName":"mindmap2","direct":"right"},"stroke":"","style":{}},{"id":"17df2905-d5e4-346f","text":"底层原理","stroke":"#ed9799","x":4248,"y":3081.5,"layout":null,"isExpand":true,"pid":"8a515b0d-5e32-cc41","style":{}},{"id":"d30e5f45-772f-da54","text":"特性","stroke":"#d5c2fc","x":4248,"y":4546.5,"layout":null,"isExpand":true,"pid":"8a515b0d-5e32-cc41","style":{}},{"id":"dd54f90b-bb0b-c2e7","text":"运用","stroke":"#d5c2fc","x":4248,"y":4939.5,"layout":null,"isExpand":true,"pid":"8a515b0d-5e32-cc41","style":{}},{"id":"bd799757-575f-39b8","text":"数据结构","stroke":"#ed9799","x":4375,"y":3089,"layout":null,"isExpand":true,"pid":"17df2905-d5e4-346f","style":{}},{"id":"39f3a4d1-ae47-ab1e","text":"单线程","stroke":"#d5c2fc","x":4336,"y":4290,"layout":null,"isExpand":true,"pid":"d30e5f45-772f-da54","style":{}},{"id":"c73a266f-1ef4-b5f6","text":"多线程（了解）","stroke":"#d5c2fc","x":4336,"y":4375,"layout":null,"isExpand":true,"pid":"d30e5f45-772f-da54"},{"id":"9ea516ba-83bf-c539","text":"内存淘汰策略","stroke":"#d5c2fc","x":4336,"y":4537,"layout":null,"isExpand":true,"pid":"d30e5f45-772f-da54","style":{}},{"id":"ba85ddba-8ac6-b070","text":"持久化","stroke":"#d5c2fc","x":4336,"y":4784,"layout":null,"isExpand":true,"pid":"d30e5f45-772f-da54"},{"id":"a48f047f-4255-11d6","text":"作为缓存","stroke":"#d5c2fc","x":4336,"y":4913,"layout":null,"isExpand":true,"pid":"dd54f90b-bb0b-c2e7","style":{}},{"id":"eb16f0df-88f8-b5c2","text":"分布式场景","stroke":"#d5c2fc","x":4336,"y":4947,"layout":null,"isExpand":true,"pid":"dd54f90b-bb0b-c2e7","style":{}},{"id":"62fe2320-dfe1-1d7f","text":"消息队列","stroke":"#d5c2fc","x":4336,"y":4981,"layout":null,"isExpand":true,"pid":"dd54f90b-bb0b-c2e7","style":{}},{"id":"ed0ac47c-161e-15a9","text":"String","stroke":"#ed9799","x":4477,"y":2196.5,"main":false,"layout":null,"isExpand":true,"pid":"bd799757-575f-39b8","style":{}},{"id":"b472d6b6-958f-93e8","text":"list","stroke":"#ed9799","x":4477,"y":2630.5,"layout":null,"isExpand":true,"pid":"bd799757-575f-39b8","style":{}},{"id":"2038f0bb-c590-657c","text":"Set","stroke":"#ed9799","x":4477,"y":3055.5,"layout":null,"isExpand":true,"pid":"bd799757-575f-39b8","style":{}},{"id":"0c77757e-e754-b5c3","text":"hash","stroke":"#ed9799","x":4477,"y":3421,"layout":null,"isExpand":true,"pid":"bd799757-575f-39b8","style":{}},{"id":"f5760da2-9625-c7c0","text":"hashTable","stroke":"#ed9799","x":4477,"y":3650.5,"layout":null,"isExpand":true,"pid":"bd799757-575f-39b8","style":{"background-color":"#B386B8"}},{"id":"813b96aa-ce61-bc61","text":"跳表","stroke":"#ed9799","x":4477,"y":3854.5,"layout":null,"isExpand":true,"pid":"bd799757-575f-39b8","style":{"background-color":"#3E76A5"}},{"id":"fd52f39f-5f40-2eff","text":"Zset","stroke":"#ed9799","x":4477,"y":4092.5,"layout":null,"isExpand":true,"pid":"bd799757-575f-39b8","style":{}},{"id":"457e811b-f28c-1b54","text":"为什么---快","stroke":"#d5c2fc","x":4422,"y":4272.5,"layout":null,"isExpand":true,"pid":"39f3a4d1-ae47-ab1e"},{"id":"6b511a0f-31b8-835d","text":"IO多路复用（为什么这么快）","stroke":"#d5c2fc","x":4422,"y":4341,"isExpand":true,"layout":{"layoutName":"mindmap2","direct":"right"},"pid":"39f3a4d1-ae47-ab1e","style":{"background-color":"#D8B24D"},"main":false},{"id":"0d0e4949-fcf4-1baa","text":"IO部分使用了多线程，性能提升一倍","stroke":"#d5c2fc","x":4486,"y":4375,"layout":null,"isExpand":true,"pid":"c73a266f-1ef4-b5f6"},{"id":"db1a6aac-4c8a-593f","text":"默认不开启淘汰策略","stroke":"#d5c2fc","x":4470,"y":4409,"layout":null,"isExpand":true,"pid":"9ea516ba-83bf-c539"},{"id":"e16006d5-f301-6206","text":"LRU","stroke":"#d5c2fc","x":4470,"y":4477,"layout":null,"isExpand":true,"pid":"9ea516ba-83bf-c539"},{"id":"a1fac8f3-5429-2273","text":"LFU","stroke":"#d5c2fc","x":4470,"y":4554,"layout":null,"isExpand":true,"pid":"9ea516ba-83bf-c539"},{"id":"5a14ba47-4cbb-9824","text":"random","stroke":"#d5c2fc","x":4470,"y":4597,"layout":null,"isExpand":true,"pid":"9ea516ba-83bf-c539"},{"id":"e6088bd1-9123-30ed","text":"ttl","stroke":"#d5c2fc","x":4470,"y":4631,"layout":null,"isExpand":true,"pid":"9ea516ba-83bf-c539"},{"id":"bc577c34-e178-8153","text":"什么时候内存回收？","stroke":"#d5c2fc","x":4470,"y":4665,"layout":null,"isExpand":true,"pid":"9ea516ba-83bf-c539"},{"id":"d397acb0-ec97-fb71","text":"执行时机","stroke":"#d5c2fc","x":4422,"y":4750,"layout":null,"isExpand":true,"pid":"ba85ddba-8ac6-b070"},{"id":"a4fe3bc5-1255-4923","text":"持久化方式","stroke":"#d5c2fc","x":4422,"y":4852,"layout":null,"isExpand":true,"pid":"ba85ddba-8ac6-b070"},{"id":"8c24e773-adfe-38cc","text":"操作","stroke":"#ed9799","x":4557,"y":1983.5,"layout":null,"isExpand":true,"pid":"ed0ac47c-161e-15a9","style":{}},{"id":"3df8f88b-cc9b-7d84","text":"编码","stroke":"#ed9799","x":4557,"y":2179.5,"layout":null,"isExpand":true,"pid":"ed0ac47c-161e-15a9","style":{}},{"id":"7abd5e52-50e2-0035","text":"实际运用场景","stroke":"#ed9799","x":4557,"y":2392.5,"layout":null,"isExpand":true,"pid":"ed0ac47c-161e-15a9","style":{}},{"id":"c392f542-4a87-7034","text":"操作","stroke":"#ed9799","x":4535,"y":2443.5,"layout":null,"isExpand":true,"pid":"b472d6b6-958f-93e8"},{"id":"8bdb41f6-9fc2-4bbb","text":"编码","stroke":"#ed9799","x":4535,"y":2630.5,"layout":null,"isExpand":true,"pid":"b472d6b6-958f-93e8"},{"id":"7e7689ae-ed23-39c6","text":"场景","stroke":"#ed9799","x":4535,"y":2817.5,"layout":null,"isExpand":true,"pid":"b472d6b6-958f-93e8"},{"id":"951b47e5-97af-9324","text":"操作","stroke":"#ed9799","x":4539,"y":2969.5,"layout":null,"isExpand":true,"pid":"2038f0bb-c590-657c"},{"id":"83b9d453-6e7d-ece5","text":"结构","stroke":"#ed9799","x":4539,"y":3173.5,"layout":null,"isExpand":true,"pid":"2038f0bb-c590-657c"},{"id":"06a60b11-a19b-5778","text":"场景","stroke":"#ed9799","x":4539,"y":3259.5,"layout":null,"isExpand":true,"pid":"2038f0bb-c590-657c"},{"id":"11f53334-aa5a-ea03","text":"操作","stroke":"#ed9799","x":4550,"y":3293.5,"layout":null,"isExpand":true,"pid":"0c77757e-e754-b5c3"},{"id":"dd67de97-be78-9283","text":"编码","stroke":"#ed9799","x":4550,"y":3421,"layout":null,"isExpand":true,"pid":"0c77757e-e754-b5c3"},{"id":"88304d65-e333-0674","text":"场景","stroke":"#ed9799","x":4550,"y":3548.5,"layout":null,"isExpand":true,"pid":"0c77757e-e754-b5c3"},{"id":"5c0df425-61cd-a71c","text":"结构","stroke":"#ed9799","x":4588,"y":3616.5,"layout":null,"isExpand":true,"pid":"f5760da2-9625-c7c0"},{"id":"305bc6c2-edc9-820b","text":"特性","stroke":"#ed9799","x":4588,"y":3701.5,"layout":null,"isExpand":true,"pid":"f5760da2-9625-c7c0"},{"id":"4239920a-8b69-04e8","text":"结构","stroke":"#ed9799","x":4547,"y":3786.5,"layout":null,"isExpand":true,"pid":"813b96aa-ce61-bc61"},{"id":"11da8632-96c9-6644","text":"场景","stroke":"#ed9799","x":4547,"y":3854.5,"layout":null,"isExpand":true,"pid":"813b96aa-ce61-bc61"},{"id":"fd4a3bd8-280b-a272","text":"特性","stroke":"#ed9799","x":4547,"y":3922.5,"layout":null,"isExpand":true,"pid":"813b96aa-ce61-bc61"},{"id":"0233fb55-7b2e-f48b","text":"操作","stroke":"#ed9799","x":4546,"y":4041.5,"layout":null,"isExpand":true,"pid":"fd52f39f-5f40-2eff"},{"id":"5b577f16-3d43-a06b","text":"编码","stroke":"#ed9799","x":4546,"y":4143.5,"layout":null,"isExpand":true,"pid":"fd52f39f-5f40-2eff"},{"id":"bbefb081-b28c-f12e","text":"场景","stroke":"#ed9799","x":4546,"y":4194.5,"layout":null,"isExpand":true,"pid":"fd52f39f-5f40-2eff"},{"id":"e35b2857-7878-7f1a","text":"为什么快？","stroke":"#d5c2fc","x":4540,"y":4272.5,"layout":null,"isExpand":true,"pid":"457e811b-f28c-1b54"},{"id":"748a80ca-963e-7555","text":"通知取代轮询","stroke":"#d5c2fc","x":4679,"y":4340.5,"layout":null,"isExpand":true,"pid":"6b511a0f-31b8-835d"},{"id":"35dd5149-7ddd-036e","text":"定义","stroke":"#d5c2fc","x":4540,"y":4443,"layout":null,"isExpand":true,"pid":"e16006d5-f301-6206"},{"id":"2dfc847f-4fef-f29a","text":"缺点","stroke":"#d5c2fc","x":4540,"y":4477,"layout":null,"isExpand":true,"pid":"e16006d5-f301-6206"},{"id":"1dd5c765-a22a-0e61","text":"Redis优化","stroke":"#d5c2fc","x":4540,"y":4511,"layout":null,"isExpand":true,"pid":"e16006d5-f301-6206"},{"id":"d055e74e-faf6-0c57","text":"在淘汰时候，他会去检测一下上次的访问和最近访问的时间的衰减再去淘汰","stroke":"#d5c2fc","x":4538,"y":4545,"layout":null,"isExpand":true,"pid":"a1fac8f3-5429-2273"},{"id":"1b276953-c354-3d83","text":"随机释放","stroke":"#d5c2fc","x":4562,"y":4597,"layout":null,"isExpand":true,"pid":"5a14ba47-4cbb-9824"},{"id":"4b6609c5-035a-f67d","text":"优先回收存活时间少的键","stroke":"#d5c2fc","x":4520,"y":4631,"layout":null,"isExpand":true,"pid":"e6088bd1-9123-30ed"},{"id":"88274345-3b50-b5f9","text":"每次读写的时候","stroke":"#d5c2fc","x":4652,"y":4665,"layout":null,"isExpand":true,"pid":"bc577c34-e178-8153"},{"id":"04204c49-c428-0ecf","text":"主动命令","stroke":"#d5c2fc","x":4524,"y":4716,"layout":null,"isExpand":true,"pid":"d397acb0-ec97-fb71"},{"id":"e6d5caa3-baa8-c898","text":"持久化阈值","stroke":"#d5c2fc","x":4524,"y":4767,"layout":null,"isExpand":true,"pid":"d397acb0-ec97-fb71"},{"id":"f19d38aa-e7c1-8bcb","text":"正常关闭之前","stroke":"#d5c2fc","x":4524,"y":4801,"layout":null,"isExpand":true,"pid":"d397acb0-ec97-fb71"},{"id":"c58d551f-6e60-7f6b","text":"RDB(快照)","stroke":"#d5c2fc","x":4540,"y":4835,"isExpand":true,"layout":null,"pid":"a4fe3bc5-1255-4923"},{"id":"b87fe5fd-d23f-7faf","text":"AOF(命令),**有AOF只会用AOF**","stroke":"#d5c2fc","x":4540,"y":4869,"layout":null,"isExpand":true,"pid":"a4fe3bc5-1255-4923"},{"id":"4d03a4f1-8130-92ef","text":"set、set  xx nx","stroke":"#ed9799","x":4627,"y":1983.5,"layout":null,"isExpand":true,"pid":"8c24e773-adfe-38cc","style":{}},{"id":"bf974a10-0641-51e1","text":"三种编码","stroke":"#ed9799","x":4627,"y":2051.5,"layout":null,"isExpand":true,"pid":"3df8f88b-cc9b-7d84","style":{}},{"id":"1c8ecd05-7cb8-0af3","text":"SDS和RedisOject","stroke":"#ed9799","x":4627,"y":2230.5,"layout":null,"isExpand":true,"pid":"3df8f88b-cc9b-7d84"},{"id":"fa43dccd-cf4f-7297","text":"缓存","stroke":"#ed9799","x":4691,"y":2375.5,"layout":null,"isExpand":true,"pid":"7abd5e52-50e2-0035","style":{}},{"id":"cb3a92ab-bcb2-1b4c","text":"分布式锁","stroke":"#ed9799","x":4691,"y":2409.5,"layout":null,"isExpand":true,"pid":"7abd5e52-50e2-0035","style":{}},{"id":"bfda25f4-f57e-a7dc","text":"lpush,rpush,llen,lpop,rpop,DEL,unlink","stroke":"#ed9799","x":4605,"y":2443.5,"layout":null,"isExpand":true,"pid":"c392f542-4a87-7034"},{"id":"9b034ddb-7c31-1966","text":"ziplist","stroke":"#ed9799","x":4605,"y":2579.5,"layout":null,"isExpand":true,"pid":"8bdb41f6-9fc2-4bbb","style":{"background-color":"rgb(16, 151, 232)"}},{"id":"564ff6ff-69eb-46b4","text":"linkedList","stroke":"#ed9799","x":4605,"y":2715.5,"layout":null,"isExpand":true,"pid":"8bdb41f6-9fc2-4bbb"},{"id":"b9601e29-7594-3146","text":"quickList","stroke":"#ed9799","x":4605,"y":2766.5,"layout":null,"isExpand":true,"pid":"8bdb41f6-9fc2-4bbb"},{"id":"8b18a044-b92c-373d","text":"list场景","stroke":"#ed9799","x":4605,"y":2817.5,"layout":null,"isExpand":true,"pid":"7e7689ae-ed23-39c6"},{"id":"2a1aac0f-bd16-54ea","text":"创建","stroke":"#ed9799","x":4609,"y":2851.5,"layout":null,"isExpand":true,"pid":"951b47e5-97af-9324"},{"id":"cc6bf28a-725b-ea0f","text":"查询","stroke":"#ed9799","x":4609,"y":2952.5,"layout":null,"isExpand":true,"pid":"951b47e5-97af-9324"},{"id":"7b7b44cd-5a52-2a13","text":"更新","stroke":"#ed9799","x":4609,"y":3053.5,"layout":null,"isExpand":true,"pid":"951b47e5-97af-9324"},{"id":"656f3cb1-fcdc-a043","text":"删除","stroke":"#ed9799","x":4609,"y":3087.5,"layout":null,"isExpand":true,"pid":"951b47e5-97af-9324"},{"id":"c04f1a81-de2f-6a30","text":"intSet","stroke":"#ed9799","x":4609,"y":3156.5,"layout":null,"isExpand":true,"pid":"83b9d453-6e7d-ece5"},{"id":"707d6609-0b8f-44e5","text":"hashTable","stroke":"#ed9799","x":4609,"y":3225.5,"layout":null,"isExpand":true,"pid":"83b9d453-6e7d-ece5","style":{"background-color":"#B386B8"}},{"id":"544b5144-e2ad-fe9b","text":"去重","stroke":"#ed9799","x":4609,"y":3259.5,"layout":null,"isExpand":true,"pid":"06a60b11-a19b-5778"},{"id":"41894ecb-8ee7-5b2f","text":"HSET、HSETNX、HLEN、HDEL、HGETALL","stroke":"#ed9799","x":4620,"y":3293.5,"layout":null,"isExpand":true,"pid":"11f53334-aa5a-ea03"},{"id":"ff4dc135-581c-35f0","text":"ziplist","stroke":"#ed9799","x":4620,"y":3344.5,"layout":null,"isExpand":true,"pid":"dd67de97-be78-9283","style":{"background-color":"rgb(16, 151, 232)"}},{"id":"c5422061-f1c9-41e2","text":"hashTable","stroke":"#ed9799","x":4620,"y":3455,"layout":null,"isExpand":true,"pid":"dd67de97-be78-9283","style":{"background-color":"#B386B8"}},{"id":"e8f37981-e73e-f1a8","text":"字典场景，学生分数，任务分配等","stroke":"#ed9799","x":4620,"y":3548.5,"layout":null,"isExpand":true,"pid":"88304d65-e333-0674"},{"id":"7fc4eb9b-b26c-60ac","text":"表头中有used表示已经使用的节点数量","stroke":"#ed9799","x":4658,"y":3582.5,"layout":null,"isExpand":true,"pid":"5c0df425-61cd-a71c"},{"id":"77360cf4-73d1-484a","text":"size和sizemak，sizemask和哈希值一起决定索引","stroke":"#ed9799","x":4658,"y":3616.5,"layout":null,"isExpand":true,"pid":"5c0df425-61cd-a71c"},{"id":"9714a901-1bab-ad49","text":"table指向实际的hash存储","stroke":"#ed9799","x":4658,"y":3650.5,"layout":null,"isExpand":true,"pid":"5c0df425-61cd-a71c"},{"id":"f843d25e-c084-ce8d","text":"渐进式扩容，t0和t1","stroke":"#ed9799","x":4658,"y":3684.5,"layout":null,"isExpand":true,"pid":"305bc6c2-edc9-820b"},{"id":"299c2c63-f96b-81d3","text":"缩容，渐进式缩容","stroke":"#ed9799","x":4658,"y":3718.5,"layout":null,"isExpand":true,"pid":"305bc6c2-edc9-820b"},{"id":"66f6cb74-0222-8395","text":"多级索引","stroke":"#ed9799","x":4617,"y":3752.5,"layout":null,"isExpand":true,"pid":"4239920a-8b69-04e8"},{"id":"0d2a9adc-befd-22ec","text":"节点数据是score","stroke":"#ed9799","x":4617,"y":3786.5,"layout":null,"isExpand":true,"pid":"4239920a-8b69-04e8"},{"id":"877d6637-9ff5-5739","text":"表头定义了length，查询总数负载度为O(1)","stroke":"#ed9799","x":4617,"y":3820.5,"layout":null,"isExpand":true,"pid":"4239920a-8b69-04e8"},{"id":"c522987f-3b6c-4076","text":"是zset的底层数据结构","stroke":"#ed9799","x":4617,"y":3854.5,"layout":null,"isExpand":true,"pid":"11da8632-96c9-6644"},{"id":"7d94ac89-7c24-c50a","text":"随机化层数，5.0.5版本最高为64层","stroke":"#ed9799","x":4617,"y":3888.5,"layout":null,"isExpand":true,"pid":"fd4a3bd8-280b-a272"},{"id":"9a1dc790-d21c-5f43","text":"查询效率媲美二分查找，负载度为O(logN)","stroke":"#ed9799","x":4617,"y":3922.5,"layout":null,"isExpand":true,"pid":"fd4a3bd8-280b-a272"},{"id":"0bbd32bb-81f8-0705","text":"节点层高是创建时就确认了，不会被新插入节点影响","stroke":"#ed9799","x":4617,"y":3956.5,"layout":null,"isExpand":true,"pid":"fd4a3bd8-280b-a272","style":{"background-color":"red"}},{"id":"618e15b0-0f54-35d0","text":"创建","stroke":"#ed9799","x":4616,"y":3990.5,"layout":null,"isExpand":true,"pid":"0233fb55-7b2e-f48b"},{"id":"dd967974-8553-8224","text":"查询","stroke":"#ed9799","x":4616,"y":4024.5,"layout":null,"isExpand":true,"pid":"0233fb55-7b2e-f48b"},{"id":"dfa914e7-0f84-0ecd","text":"更新","stroke":"#ed9799","x":4616,"y":4058.5,"layout":null,"isExpand":true,"pid":"0233fb55-7b2e-f48b"},{"id":"e91eafa1-0e28-b747","text":"删除","stroke":"#ed9799","x":4616,"y":4092.5,"layout":null,"isExpand":true,"pid":"0233fb55-7b2e-f48b"},{"id":"6e535031-b723-a744","text":"Ziplist","stroke":"#ed9799","x":4616,"y":4126.5,"layout":null,"isExpand":true,"pid":"5b577f16-3d43-a06b","style":{"background-color":"rgb(16, 151, 232)"}},{"id":"2e748638-6b65-6cd7","text":"跳表+HashTable","stroke":"#ed9799","x":4616,"y":4160.5,"layout":null,"isExpand":true,"pid":"5b577f16-3d43-a06b","style":{"background-color":"#3E76A5"}},{"id":"170e57ee-277b-224b","text":"排行榜、分数相关","stroke":"#ed9799","x":4616,"y":4194.5,"layout":null,"isExpand":true,"pid":"bbefb081-b28c-f12e"},{"id":"109924c3-97e2-4d75","text":"内存操作很快","stroke":"#d5c2fc","x":4658,"y":4238.5,"layout":null,"isExpand":true,"pid":"e35b2857-7878-7f1a"},{"id":"827a853c-7ae9-58ff","text":"高效的数据结构","stroke":"#d5c2fc","x":4658,"y":4272.5,"layout":null,"isExpand":true,"pid":"e35b2857-7878-7f1a"},{"id":"e4415564-f31e-9490","text":"IO多路复用","stroke":"#d5c2fc","x":4658,"y":4306.5,"layout":null,"isExpand":true,"pid":"e35b2857-7878-7f1a","style":{"background-color":"#D8B24D"}},{"id":"1afbebb8-9a0f-d162","text":"淘汰最近最久未使用的数据，latest Recently Used","stroke":"#d5c2fc","x":4610,"y":4443,"layout":null,"isExpand":true,"pid":"35dd5149-7ddd-036e"},{"id":"daee66e7-c496-1e2d","text":"忽略频率","stroke":"#d5c2fc","x":4610,"y":4477,"layout":null,"isExpand":true,"pid":"2dfc847f-4fef-f29a"},{"id":"7a55b4c1-3444-3c97","text":"候选池","stroke":"#d5c2fc","x":4651,"y":4511,"layout":null,"isExpand":true,"pid":"1dd5c765-a22a-0e61"},{"id":"21360dab-06c3-e728","text":"save--主动save","stroke":"#d5c2fc","x":4626,"y":4699,"layout":null,"isExpand":true,"pid":"04204c49-c428-0ecf"},{"id":"23fcfd96-8f01-2ade","text":"bgsave--异步save，创建一个子进程save","stroke":"#d5c2fc","x":4626,"y":4733,"layout":null,"isExpand":true,"pid":"04204c49-c428-0ecf"},{"id":"4a3d2a1a-2e22-1e86","text":"写时复制，bgsave","stroke":"#d5c2fc","x":4654,"y":4835,"layout":null,"isExpand":true,"pid":"c58d551f-6e60-7f6b"},{"id":"a0ec5f6f-3f86-cf2d","text":"int","stroke":"#ed9799","x":4729,"y":2017.5,"layout":null,"isExpand":true,"pid":"bf974a10-0641-51e1","style":{}},{"id":"00658dd8-d1a6-7a5b","text":"embstr","stroke":"#ed9799","x":4729,"y":2051.5,"layout":null,"isExpand":true,"pid":"bf974a10-0641-51e1","style":{}},{"id":"01d4f765-8b20-c0f7","text":"raw","stroke":"#ed9799","x":4729,"y":2085.5,"layout":null,"isExpand":true,"pid":"bf974a10-0641-51e1","style":{}},{"id":"e82546c2-9a26-1b54","text":"SDS","stroke":"#ed9799","x":4792,"y":2204.5,"layout":null,"isExpand":true,"pid":"1c8ecd05-7cb8-0af3","style":{"background-color":"rgb(67, 160, 71)"}},{"id":"57d7391a-970d-f04a","text":"RedisObj","stroke":"#ed9799","x":4792,"y":2332.5,"layout":null,"isExpand":true,"pid":"1c8ecd05-7cb8-0af3"},{"id":"f6934b2f-e1a2-8a71","text":"优点","stroke":"#ed9799","x":4683,"y":2477.5,"layout":null,"isExpand":true,"pid":"9b034ddb-7c31-1966"},{"id":"302e2066-fd54-cd6d","text":"缺点","stroke":"#ed9799","x":4683,"y":2528.5,"layout":null,"isExpand":true,"pid":"9b034ddb-7c31-1966"},{"id":"3f44bd77-9c56-4c0b","text":"条件","stroke":"#ed9799","x":4683,"y":2596.5,"layout":null,"isExpand":true,"pid":"9b034ddb-7c31-1966"},{"id":"2012959a-680c-7caa","text":"结构","stroke":"#ed9799","x":4683,"y":2664.5,"layout":null,"isExpand":true,"pid":"9b034ddb-7c31-1966"},{"id":"c3bf6743-a1a3-05aa","text":"结构：表头定义了len，long类型，所以查询节点复杂度是O(1)","stroke":"#ed9799","x":4710,"y":2715.5,"layout":null,"isExpand":true,"pid":"564ff6ff-69eb-46b4"},{"id":"68e249bf-a995-2ae9","text":"结构","stroke":"#ed9799","x":4705,"y":2749.5,"layout":null,"isExpand":true,"pid":"b9601e29-7594-3146"},{"id":"c0aee706-0a24-6b74","text":"3.2版本以后用的都是quickList","stroke":"#ed9799","x":4705,"y":2783.5,"layout":null,"isExpand":true,"pid":"b9601e29-7594-3146","style":{"background-color":"#7ADD99"}},{"id":"5346db27-79b1-ba0a","text":"SADD","stroke":"#ed9799","x":4679,"y":2851.5,"layout":null,"isExpand":true,"pid":"2a1aac0f-bd16-54ea"},{"id":"315c64ea-01ab-e88a","text":"- SISMEMBR : 查询是否为成员\n - SISMEMBRS : 返回集合中所有成员的列表 \n        - SCCARD： 返回集合中成员个数\n        - SSCAN : 遍历，后面跟下标和count，还可以用match进行模糊查询\n        - SINTER : 以前面的集合判断交集\n        - SUNION：并集\n        - SDIFF：different 多个set的去重，以前面的为基准","stroke":"#ed9799","x":4679,"y":2885.5,"layout":null,"isExpand":true,"pid":"cc6bf28a-725b-ea0f"},{"id":"d5a8e2ce-e29c-bf0e","text":"SADD","stroke":"#ed9799","x":4679,"y":3053.5,"layout":null,"isExpand":true,"pid":"7b7b44cd-5a52-2a13"},{"id":"99db1fcf-e871-7658","text":"DEL","stroke":"#ed9799","x":4679,"y":3087.5,"layout":null,"isExpand":true,"pid":"656f3cb1-fcdc-a043"},{"id":"9031b987-98f2-60ae","text":"条件：如果集群元素都是整数，且元素数量不超过512个，就采用inset编码","stroke":"#ed9799","x":4688,"y":3121.5,"layout":null,"isExpand":true,"pid":"c04f1a81-de2f-6a30"},{"id":"4a4c2b2c-7163-3b4b","text":"特点：节约内存，但是查询的时候要用二分查找,也就是复杂度是o(logN)","stroke":"#ed9799","x":4688,"y":3173.5,"layout":null,"isExpand":true,"pid":"c04f1a81-de2f-6a30"},{"id":"b1bf7fd1-aa71-0862","text":"性能很高，O(1)复杂度下就能找到一个元素是否存在","stroke":"#ed9799","x":4720,"y":3225.5,"layout":null,"isExpand":true,"pid":"707d6609-0b8f-44e5"},{"id":"db3037d9-9796-0cbd","text":"和list里面的ziplist编码一样的条件","stroke":"#ed9799","x":4698,"y":3344.5,"layout":null,"isExpand":true,"pid":"ff4dc135-581c-35f0"},{"id":"77fcdeb2-b7fe-d848","text":"和Set中存储的区别在于，Set中的value始终为null，但是Hash里面是有值的","stroke":"#ed9799","x":4731,"y":3446,"layout":null,"isExpand":true,"pid":"c5422061-f1c9-41e2"},{"id":"63e2838a-72b0-bf13","text":"新节点","stroke":"#ed9799","x":4719,"y":3752.5,"layout":null,"isExpand":true,"pid":"66f6cb74-0222-8395"},{"id":"9de6898f-c20d-615b","text":"score可以重复，增加了回退指针","stroke":"#ed9799","x":4774,"y":3786.5,"layout":null,"isExpand":true,"pid":"0d2a9adc-befd-22ec"},{"id":"33baf4ba-41c1-a4cc","text":"ZADD","stroke":"#ed9799","x":4686,"y":3990.5,"layout":null,"isExpand":true,"pid":"618e15b0-0f54-35d0"},{"id":"5dd4a48d-328d-6858","text":"ZRANGE,ZCOUNT,ZRANK","stroke":"#ed9799","x":4686,"y":4024.5,"layout":null,"isExpand":true,"pid":"dd967974-8553-8224"},{"id":"9113ab78-507d-021a","text":"ZADD,ZREM","stroke":"#ed9799","x":4686,"y":4058.5,"layout":null,"isExpand":true,"pid":"dfa914e7-0f84-0ecd"},{"id":"3024dd43-cb21-ea3d","text":"DEL,UNLINK","stroke":"#ed9799","x":4686,"y":4092.5,"layout":null,"isExpand":true,"pid":"e91eafa1-0e28-b747"},{"id":"d7542ecc-ae85-baeb","text":"看上面的条件吧","stroke":"#ed9799","x":4696,"y":4126.5,"layout":null,"isExpand":true,"pid":"6e535031-b723-a744"},{"id":"fdec5155-c3ef-dace","text":"这里是搭配使用","stroke":"#ed9799","x":4771,"y":4160.5,"note":"","layout":null,"isExpand":true,"pid":"2e748638-6b65-6cd7"},{"id":"774c77b6-7b2d-81e2","text":"数字，占空间小","stroke":"#ed9799","x":4784,"y":2017.5,"layout":null,"isExpand":true,"pid":"a0ec5f6f-3f86-cf2d","style":{}},{"id":"1f1c2cef-1d8e-e411","text":"一次性分配地址，占内存小，任何写操作后都变成Raw","stroke":"#ed9799","x":4816,"y":2051.5,"layout":null,"isExpand":true,"pid":"00658dd8-d1a6-7a5b","style":{}},{"id":"e0daf19f-ced7-3b81","text":"sds和RedisObj分开,阈值44","stroke":"#ed9799","x":4793,"y":2085.5,"layout":null,"isExpand":true,"pid":"01d4f765-8b20-c0f7","style":{}},{"id":"d65719ca-40ab-9e18","text":"字节头","stroke":"#ed9799","x":4863,"y":2170.5,"layout":null,"isExpand":true,"pid":"e82546c2-9a26-1b54"},{"id":"72ef8590-da95-d937","text":"内容buf,用来保存字符串","stroke":"#ed9799","x":4863,"y":2255.5,"layout":null,"isExpand":true,"pid":"e82546c2-9a26-1b54"},{"id":"99fcaa40-ffd0-36b0","text":"分类","stroke":"#ed9799","x":4863,"y":2289.5,"layout":null,"isExpand":true,"pid":"e82546c2-9a26-1b54"},{"id":"6574390a-7958-f96b","text":"用来存储type、和encoding，其中encodeing表示三种编码的一种","stroke":"#ed9799","x":4896,"y":2323.5,"layout":null,"isExpand":true,"pid":"57d7391a-970d-f04a"},{"id":"2103f220-7139-f1e2","text":"内存占用小","stroke":"#ed9799","x":4753,"y":2477.5,"layout":null,"isExpand":true,"pid":"f6934b2f-e1a2-8a71"},{"id":"0b7e366b-5a9f-fd2f","text":"更新成本高，所有数据移动","stroke":"#ed9799","x":4753,"y":2511.5,"layout":null,"isExpand":true,"pid":"302e2066-fd54-cd6d"},{"id":"7d51bce0-17cb-f8d6","text":"连锁更新","stroke":"#ed9799","x":4753,"y":2545.5,"layout":null,"isExpand":true,"pid":"302e2066-fd54-cd6d"},{"id":"d48827c0-06ca-0086","text":"元素数量小于512个","stroke":"#ed9799","x":4753,"y":2579.5,"layout":null,"isExpand":true,"pid":"3f44bd77-9c56-4c0b"},{"id":"3e4607af-69fb-d005","text":"字符串对象长度小于64字节","stroke":"#ed9799","x":4753,"y":2613.5,"layout":null,"isExpand":true,"pid":"3f44bd77-9c56-4c0b"},{"id":"800b7e22-9554-c715","text":"zllen：2个字节长度以内，查询节点个数O(1)","stroke":"#ed9799","x":4753,"y":2647.5,"layout":null,"isExpand":true,"pid":"2012959a-680c-7caa"},{"id":"430a7e99-0cd1-843c","text":"entry：实际数据","stroke":"#ed9799","x":4753,"y":2681.5,"layout":null,"isExpand":true,"pid":"2012959a-680c-7caa"},{"id":"e69250b5-6da7-80be","text":"linkedlist的结构，里面储存的是ziplist","stroke":"#ed9799","x":4775,"y":2749.5,"layout":null,"isExpand":true,"pid":"68e249bf-a995-2ae9"},{"id":"7e2e76cc-8ee3-e43c","text":"元素数量小于512个","stroke":"#ed9799","x":4971,"y":3327.5,"layout":null,"isExpand":true,"pid":"db3037d9-9796-0cbd"},{"id":"4293bab3-a1af-a541","text":"字符串对象长度小于64字节","stroke":"#ed9799","x":4971,"y":3361.5,"layout":null,"isExpand":true,"pid":"db3037d9-9796-0cbd"},{"id":"9a58fcef-04f3-ff15","text":"![[Paste image 1705934150311image.png]]","stroke":"#ed9799","x":5211,"y":3395.5,"layout":null,"isExpand":true,"pid":"77fcdeb2-b7fe-d848"},{"id":"4051b26d-f0e8-a8cf","text":"len保存长度","stroke":"#ed9799","x":4949,"y":2119.5,"layout":null,"isExpand":true,"pid":"d65719ca-40ab-9e18"},{"id":"50a9e3a7-8b5b-5034","text":"预留空间 alloc - len","stroke":"#ed9799","x":4949,"y":2153.5,"main":false,"layout":{"layoutName":"mindmap2","direct":"right"},"isExpand":true,"pid":"d65719ca-40ab-9e18"},{"id":"63dd8c0c-49ab-44a2","text":"二进制安全--不用/0为结尾，用len判断就行","stroke":"#ed9799","x":4949,"y":2187.5,"layout":null,"isExpand":true,"pid":"d65719ca-40ab-9e18"},{"id":"677bcb72-d5ec-d5ac","text":"flags:这个用来表示分类，比如sdshdr8","stroke":"#ed9799","x":4949,"y":2221.5,"layout":null,"isExpand":true,"pid":"d65719ca-40ab-9e18"},{"id":"d2209e53-ded8-bf4b","text":"有sdshdr 8, sdshdr 16等","stroke":"#ed9799","x":4933,"y":2289.5,"layout":null,"isExpand":true,"pid":"99fcaa40-ffd0-36b0"},{"id":"d5576a78-cd2b-f780","text":"这一点在Redis7.0中使用listPack优化掉了ziplist","stroke":"#ed9799","x":4855,"y":2545.5,"layout":null,"isExpand":true,"pid":"7d51bce0-17cb-f8d6","style":{"background-color":"orange"}},{"id":"bbcea65d-326b-4fc9","text":"里面有结构是prevlen，造成连锁更新的原因","stroke":"#ed9799","x":4907,"y":2681.5,"layout":null,"isExpand":true,"pid":"430a7e99-0cd1-843c"}]],"induceData":[{"induceData":{"nodeId":"f843d25e-c084-ce8d","endNodeId":"299c2c63-f96b-81d3","stroke":"#666","root":"b569c3ce-c162-7626","lineType":"solid","id":1706403474050,"range":"0,1","type":"right"},"mindData":[{"id":"b569c3ce-c162-7626","text":"负载因子","x":4835,"y":3701.5,"layout":null,"isExpand":true,"stroke":""}]}],"wireFrameData":[],"relateLinkData":[{"startNodeId":"f5760da2-9625-c7c0","endNodeId":"707d6609-0b8f-44e5","color":"#f06","width":2,"nodeData":{"id":"5e413f3b-95c9-5301","text":"","nodeType":"relateLink","backgroundColor":"#f06","mdText":"","x":4470.61865234375,"y":3403.2802734375,"layout":null,"isExpand":true,"stroke":""},"type":"bs","dashArray":[0],"nodeHide":false,"startMarker":"circle","endMarker":"arrow","startDirect":"top","endDirect":"left","startDx":0.5802469135802469,"startDy":-0.25,"endDx":-0.06584362139918444,"endDy":0.5277777777779799,"gapsx":66.91666666666697,"gapsy":71.83333333333303,"gapex":-250.41666666666697,"gapey":1.1666666666669698,"box":{"x":4524,"y":3644.5,"x1":4603.666666666666,"y1":3238.1666666666715,"cpx1":4543.916666666667,"cpy1":3722.333333333333,"cpx2":4358.583333333333,"cpy2":3226.666666666667,"startDirect":"","startDx":0,"startDy":0,"endDirect":"","endDx":0,"endDy":0},"entryDirection":[0,-1],"exitDirection":[-1,0]},{"startNodeId":"ff4dc135-581c-35f0","endNodeId":"9b034ddb-7c31-1966","color":"#f06","width":2,"nodeData":{"id":"d82d93e6-32ca-af5c","text":"","nodeType":"relateLink","backgroundColor":"#f06","x":4495.5595703125,"y":2948.957275390625,"layout":null,"isExpand":true,"stroke":"","mdText":""},"type":"bs","dashArray":[0],"nodeHide":false,"startMarker":"circle","endMarker":"arrow","startDirect":"top","endDirect":"bottom","startDx":0.4583333333333333,"startDy":-0.25,"endDx":0.01388888888883836,"endDy":1.1666666666666476,"gapsx":17.5,"gapsy":-125.41666666666652,"gapex":-301.5,"gapey":189.91666666666652,"box":{"x":4642,"y":3338.5,"x1":4605.666666666664,"y1":2607.4999999999995,"cpx1":4637.5,"cpy1":3219.0833333333335,"cpx2":4303.5,"cpy2":2769.4166666666665,"startDirect":"","startDx":0,"startDy":0,"endDirect":"","endDx":0,"endDy":0},"entryDirection":[0,-1],"exitDirection":[0,1]},{"startNodeId":"6e535031-b723-a744","endNodeId":"ff4dc135-581c-35f0","color":"#f06","width":2,"nodeData":{"id":"0a68d3ba-5a50-01cd","text":"","nodeType":"relateLink","backgroundColor":"#f06","mdText":"","x":4407.12158203125,"y":3745.881591796875,"layout":null,"isExpand":true,"stroke":""},"type":"bs","dashArray":[0],"nodeHide":false,"startMarker":"circle","endMarker":"arrow","startDirect":"left","endDirect":"leftbottom","startDx":-0.12,"startDy":0.5416666666666666,"endDx":-0.125,"endDy":1.25,"gapsx":-153.16666666666697,"gapsy":-71.25,"gapex":-371.83333333333303,"gapey":340.75,"box":{"x":4610,"y":4139.5,"x1":4614,"y1":3374.5,"cpx1":4462.833333333333,"cpy1":4055.25,"cpx2":4248.166666666667,"cpy2":3685.25,"startDirect":"","startDx":0,"startDy":0,"endDirect":"","endDx":0,"endDy":0},"entryDirection":[-1,0],"exitDirection":[-1,0]}],"calloutData":[]}
```
