---
created: 2024-02-27
updated: 2024-02-27
Type: knowledge
Status: ⌛️ 等待
tags:
---
##  子查询
简而言之，套娃查询
![image.png](https://obsidian-pic-1317906728.cos.ap-nanjing.myqcloud.com/obsidian/20240227231703.png)


## ALL 关键字
ALL 关键字的使用方式可以用 IN 来类比
下面是大概的理解
![image.png](https://obsidian-pic-1317906728.cos.ap-nanjing.myqcloud.com/obsidian/20240227232810.png)
然后是能跑通的过程
![image.png](https://obsidian-pic-1317906728.cos.ap-nanjing.myqcloud.com/obsidian/20240227232914.png)

```sql
-- 查询表中所有大于，客户3所拥有的最大发票，的所有发票
SELECT * From invoices WHERE invoice_total >(
	SELECT max(invoice_total) FROM invoices 
	where client_id =3
);
-- 和上面一样结果，只是加了all关键字
SELECT * From invoices WHERE invoice_total > ALL (
	SELECT invoice_total FROM invoices 
	where client_id =3
);
```

**总结**：就是说 max 的聚合函数都可以用 all 进行替换，反之亦然

## ANY 关键字

= any 可以和 in 关键字互换，达到相同的效果
例如
```sql
select * from xxx where a in (1,2,5,25);
select * from xxx where a = any(1,2,5,25);
```

注意 any 不能有空格和括号相隔

```sql
SELECT * FROM clients WHERE client_id = any(
SELECT client_id FROM invoices GROUP BY client_id HAVING COUNT(*) >=2
)
```


- [ ] 看到 p51 [7- 相关子查询 | Correlated Subqueries\_哔哩哔哩\_bilibili](https://www.bilibili.com/video/BV1UE41147KC/?p=51&spm_id_from=pageDriver&vd_source=eb319c6e317591be75da0554d1d79e3a)

## exists 关键字

同样是和 IN 关键字有关联
