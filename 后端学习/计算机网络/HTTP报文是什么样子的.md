---
Created: 2024-01-17
Updated: 2024-01-17
Type: knowledge
Status: 🌱 活跃
截止日期: 
目标: 
领域: 
Tags:
---
## HTTP报文是什么样子的

http协议与TCP/UDP类似，也是需要在实际传输的数据前面加上一些头数据，包含协议所必须的一些字段，比如发送方和接受方的端口号，包序号和标志位等，但是和TCP/UDP不同的是，HTTP是一个纯文本的协议，头部数据都是ASCII码的文本，很容易用肉眼阅读，其请求报文和响应报文基本相同，由三大块组成

​	

1. 起始行（start line）(也就是请求行)：描述请求或响应的基本信息;
2. 头部字段集合（header）：使用 key-value 形式更详细地说明报文;
3. .消息正文（entity）：实际传输的数据，它不一定是纯文本，可以是图片、视频等二进制数据。

### 请求行（请求报文的起始行）

^b6305c

请求行由三部分组成，三个部分通常使用空格分隔，最后用CRLF表示换行结束
![image-20231227230603762.png](https://obsidian-pic-1317906728.cos.ap-nanjing.myqcloud.com/obsidian/image-20231227230603762.png)


1. 请求方法
2. 请求目标
3. 版本号

举个例子

```http
GET / HTTP/1.1 
```

GET”是请求方法，“/”是请求目标，“HTTP/1.1”是版本号

#### 状态行（响应报文的起始行）

也是三部分

1. 版本号
2. 状态码
3. 原因

![image-20231227230849528.png](https://obsidian-pic-1317906728.cos.ap-nanjing.myqcloud.com/obsidian/image-20231227230849528.png)


```http
HTTP/1.1 200 OK
```

Http1.1就是版本号、200就是状态码、ok就是原因，成功就是OK

```http
HTTP/1.1 404 Not Found
```

这个后面就更详细的说明了原因 NOTFound

#### 头部字段

[[#^b6305c|请求行]]或者[[#状态行（响应报文的起始行）|状态行]]，加上==**头部字段集合**==就构成了HTTP报文里面完整的请求头或者响应头
	![image-20231227231347322.png](https://obsidian-pic-1317906728.cos.ap-nanjing.myqcloud.com/obsidian/image-20231227231347322.png) ^5b6ad0


而头部字段，是key value的形式，key value之间用  ： 分隔，最后用CRLF表示换行结束

- 头部字段的注意事项
  1. 字段名不区分大小写
  2. 字段名不允许出现空格，但是可以用  "-" ，但不能使用下划线
  3. 字段名后面必须紧跟着  ":" ，不能有空格，但是 “：” 后面的字段值前可以有多个空格
  4. 字段顺序是没有意义的，可以任意排列不影响
  5. 字段原则上不允许重复，除非这个字段本身的语义允许，例如 set-Cookie

- 常用头字段 

  首先是头字段基本可以分为四类

  1. 通用字段，在请求头和响应头里面都能出现
  2. 请求字段：仅能出现在请求头里面，
  3. 响应字段：仅能出现在响应头里面
  4. 实体字段：实际上属于通用字段，但是专门描述body的额外信息

然后是常见的一些字段

1. `HOST 字段`；属于请求字段，只能出现在请求头里面，也是必须要求出现的字段，==如果请求头里面没有这个字段，那这个就是一个错误的请求头==,host字段告诉服务器这个请求应该由哪个主机来处理,当一台计算机上托管了很多虚拟主机的时候，服务端就需要host字段来判断使用哪个主机
2. `User-Agent字段`：这个是 用来描述发起HTTP请求的客户端，比如Chrome、Safari，这个字段只能稍微判断一下，因为每个浏览器都可能说自己是Chrome但是实际上是爬虫
3. 。。。
