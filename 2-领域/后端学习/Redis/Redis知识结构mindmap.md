---
mindmap-plugin: rich
created: 2024-01-22
updated: 2024-01-22
Type: 总结
Status: ⌛️ 等待
tags:
---

# Redis知识结构
``` json
{"theme":"","mindData":[[{"id":"8a515b0d-5e32-cc41","text":"Redis知识结构","isRoot":true,"main":true,"x":4000,"y":4000,"isExpand":true,"layout":{"layoutName":"mindmap2","direct":"right"},"stroke":"","style":{}},{"id":"17df2905-d5e4-346f","text":"底层原理","stroke":"#ed9799","x":4248,"y":2698.5,"layout":null,"isExpand":true,"pid":"8a515b0d-5e32-cc41","style":{}},{"id":"d30e5f45-772f-da54","text":"特性","stroke":"#d5c2fc","x":4248,"y":4249,"layout":null,"isExpand":true,"pid":"8a515b0d-5e32-cc41","style":{}},{"id":"dd54f90b-bb0b-c2e7","text":"运用","stroke":"#d5c2fc","x":4248,"y":5322.5,"layout":null,"isExpand":true,"pid":"8a515b0d-5e32-cc41","style":{}},{"id":"bd799757-575f-39b8","text":"数据结构","stroke":"#ed9799","x":4375,"y":2706.5,"layout":null,"isExpand":true,"pid":"17df2905-d5e4-346f","style":{}},{"id":"39f3a4d1-ae47-ab1e","text":"单线程","stroke":"#d5c2fc","x":4336,"y":3949,"layout":null,"isExpand":true,"pid":"d30e5f45-772f-da54","style":{}},{"id":"c73a266f-1ef4-b5f6","text":"多线程（了解）","stroke":"#d5c2fc","x":4336,"y":4036.5,"layout":null,"isExpand":true,"pid":"d30e5f45-772f-da54"},{"id":"9ea516ba-83bf-c539","text":"内存淘汰策略","stroke":"#d5c2fc","x":4336,"y":4204.5,"layout":null,"isExpand":true,"pid":"d30e5f45-772f-da54","style":{}},{"id":"ba85ddba-8ac6-b070","text":"持久化","stroke":"#d5c2fc","x":4336,"y":4495,"layout":null,"isExpand":true,"pid":"d30e5f45-772f-da54"},{"id":"a48f047f-4255-11d6","text":"作为缓存","stroke":"#d5c2fc","x":4336,"y":4907.5,"layout":null,"isExpand":true,"pid":"dd54f90b-bb0b-c2e7","style":{}},{"id":"eb16f0df-88f8-b5c2","text":"分布式场景","stroke":"#d5c2fc","x":4336,"y":5575.5,"layout":null,"isExpand":true,"pid":"dd54f90b-bb0b-c2e7","style":{}},{"id":"62fe2320-dfe1-1d7f","text":"消息队列+秒杀","stroke":"#d5c2fc","x":4336,"y":5998.5,"layout":null,"isExpand":true,"pid":"dd54f90b-bb0b-c2e7","style":{}},{"id":"ed0ac47c-161e-15a9","text":"String","stroke":"#ed9799","x":4477,"y":1782,"main":false,"layout":null,"isExpand":true,"pid":"bd799757-575f-39b8","style":{}},{"id":"b472d6b6-958f-93e8","text":"list","stroke":"#ed9799","x":4477,"y":2230,"layout":null,"isExpand":true,"pid":"bd799757-575f-39b8","style":{}},{"id":"2038f0bb-c590-657c","text":"Set","stroke":"#ed9799","x":4477,"y":2673.5,"layout":null,"isExpand":true,"pid":"bd799757-575f-39b8","style":{}},{"id":"0c77757e-e754-b5c3","text":"hash","stroke":"#ed9799","x":4477,"y":3055.5,"layout":null,"isExpand":true,"pid":"bd799757-575f-39b8","style":{}},{"id":"f5760da2-9625-c7c0","text":"hashTable","stroke":"#ed9799","x":4477,"y":3291.5,"layout":null,"isExpand":true,"pid":"bd799757-575f-39b8","style":{"background-color":"#B386B8"}},{"id":"813b96aa-ce61-bc61","text":"跳表","stroke":"#ed9799","x":4477,"y":3501.5,"layout":null,"isExpand":true,"pid":"bd799757-575f-39b8","style":{"background-color":"#3E76A5"}},{"id":"fd52f39f-5f40-2eff","text":"Zset","stroke":"#ed9799","x":4477,"y":3746.5,"layout":null,"isExpand":true,"pid":"bd799757-575f-39b8","style":{}},{"id":"457e811b-f28c-1b54","text":"为什么---快","stroke":"#d5c2fc","x":4422,"y":3931.5,"layout":null,"isExpand":true,"pid":"39f3a4d1-ae47-ab1e"},{"id":"6b511a0f-31b8-835d","text":"IO多路复用（为什么这么快）","stroke":"#d5c2fc","x":4422,"y":4001.5,"isExpand":true,"layout":{"layoutName":"mindmap2","direct":"right"},"pid":"39f3a4d1-ae47-ab1e","style":{"background-color":"#D8B24D"},"main":false},{"id":"0d0e4949-fcf4-1baa","text":"IO部分使用了多线程，性能提升一倍","stroke":"#d5c2fc","x":4486,"y":4036.5,"layout":null,"isExpand":true,"pid":"c73a266f-1ef4-b5f6"},{"id":"db1a6aac-4c8a-593f","text":"默认不开启淘汰策略","stroke":"#d5c2fc","x":4470,"y":4071.5,"layout":null,"isExpand":true,"pid":"9ea516ba-83bf-c539"},{"id":"e16006d5-f301-6206","text":"LRU","stroke":"#d5c2fc","x":4470,"y":4141.5,"layout":null,"isExpand":true,"pid":"9ea516ba-83bf-c539"},{"id":"a1fac8f3-5429-2273","text":"LFU","stroke":"#d5c2fc","x":4470,"y":4222,"layout":null,"isExpand":true,"pid":"9ea516ba-83bf-c539"},{"id":"5a14ba47-4cbb-9824","text":"random","stroke":"#d5c2fc","x":4470,"y":4267.5,"layout":null,"isExpand":true,"pid":"9ea516ba-83bf-c539"},{"id":"e6088bd1-9123-30ed","text":"ttl","stroke":"#d5c2fc","x":4470,"y":4302.5,"layout":null,"isExpand":true,"pid":"9ea516ba-83bf-c539"},{"id":"bc577c34-e178-8153","text":"什么时候内存回收？","stroke":"#d5c2fc","x":4470,"y":4337.5,"layout":null,"isExpand":true,"pid":"9ea516ba-83bf-c539"},{"id":"d397acb0-ec97-fb71","text":"执行时机","stroke":"#d5c2fc","x":4422,"y":4425,"layout":null,"isExpand":true,"pid":"ba85ddba-8ac6-b070"},{"id":"a4fe3bc5-1255-4923","text":"持久化方式","stroke":"#d5c2fc","x":4422,"y":4565,"layout":null,"isExpand":true,"pid":"ba85ddba-8ac6-b070"},{"id":"7f30ba78-6902-a2bc","text":"异常","stroke":"#d5c2fc","x":4438,"y":4816.5,"layout":null,"isExpand":true,"pid":"a48f047f-4255-11d6"},{"id":"6f51453f-aff2-d804","text":"模式","stroke":"#d5c2fc","x":4438,"y":5079,"layout":null,"isExpand":true,"pid":"a48f047f-4255-11d6"},{"id":"75c88efa-0f06-fdaf","text":"分布式锁","stroke":"#d5c2fc","x":4454,"y":5505.5,"layout":null,"isExpand":true,"pid":"eb16f0df-88f8-b5c2"},{"id":"66135795-768c-a0d8","text":"集群","stroke":"#d5c2fc","x":4454,"y":5911,"layout":null,"isExpand":true,"pid":"eb16f0df-88f8-b5c2"},{"id":"8c24e773-adfe-38cc","text":"操作","stroke":"#ed9799","x":4557,"y":1561.5,"layout":null,"isExpand":true,"pid":"ed0ac47c-161e-15a9","style":{}},{"id":"3df8f88b-cc9b-7d84","text":"编码","stroke":"#ed9799","x":4557,"y":1764.5,"layout":null,"isExpand":true,"pid":"ed0ac47c-161e-15a9","style":{}},{"id":"7abd5e52-50e2-0035","text":"实际运用场景","stroke":"#ed9799","x":4557,"y":1985,"layout":null,"isExpand":true,"pid":"ed0ac47c-161e-15a9","style":{}},{"id":"c392f542-4a87-7034","text":"操作","stroke":"#ed9799","x":4535,"y":2037.5,"layout":null,"isExpand":true,"pid":"b472d6b6-958f-93e8"},{"id":"8bdb41f6-9fc2-4bbb","text":"编码","stroke":"#ed9799","x":4535,"y":2230,"layout":null,"isExpand":true,"pid":"b472d6b6-958f-93e8"},{"id":"7e7689ae-ed23-39c6","text":"场景","stroke":"#ed9799","x":4535,"y":2422.5,"layout":null,"isExpand":true,"pid":"b472d6b6-958f-93e8"},{"id":"951b47e5-97af-9324","text":"操作","stroke":"#ed9799","x":4539,"y":2582.5,"layout":null,"isExpand":true,"pid":"2038f0bb-c590-657c"},{"id":"83b9d453-6e7d-ece5","text":"结构","stroke":"#ed9799","x":4539,"y":2798.5,"layout":null,"isExpand":true,"pid":"2038f0bb-c590-657c"},{"id":"06a60b11-a19b-5778","text":"场景","stroke":"#ed9799","x":4539,"y":2889.5,"layout":null,"isExpand":true,"pid":"2038f0bb-c590-657c"},{"id":"11f53334-aa5a-ea03","text":"操作","stroke":"#ed9799","x":4550,"y":2924.5,"layout":null,"isExpand":true,"pid":"0c77757e-e754-b5c3"},{"id":"dd67de97-be78-9283","text":"编码","stroke":"#ed9799","x":4550,"y":3055.5,"layout":null,"isExpand":true,"pid":"0c77757e-e754-b5c3"},{"id":"88304d65-e333-0674","text":"场景","stroke":"#ed9799","x":4550,"y":3186.5,"layout":null,"isExpand":true,"pid":"0c77757e-e754-b5c3"},{"id":"5c0df425-61cd-a71c","text":"结构","stroke":"#ed9799","x":4588,"y":3256.5,"layout":null,"isExpand":true,"pid":"f5760da2-9625-c7c0"},{"id":"305bc6c2-edc9-820b","text":"特性","stroke":"#ed9799","x":4588,"y":3344,"layout":null,"isExpand":true,"pid":"f5760da2-9625-c7c0"},{"id":"4239920a-8b69-04e8","text":"结构","stroke":"#ed9799","x":4547,"y":3431.5,"layout":null,"isExpand":true,"pid":"813b96aa-ce61-bc61"},{"id":"11da8632-96c9-6644","text":"场景","stroke":"#ed9799","x":4547,"y":3501.5,"layout":null,"isExpand":true,"pid":"813b96aa-ce61-bc61"},{"id":"fd4a3bd8-280b-a272","text":"特性","stroke":"#ed9799","x":4547,"y":3571.5,"layout":null,"isExpand":true,"pid":"813b96aa-ce61-bc61"},{"id":"0233fb55-7b2e-f48b","text":"操作","stroke":"#ed9799","x":4546,"y":3694,"layout":null,"isExpand":true,"pid":"fd52f39f-5f40-2eff"},{"id":"5b577f16-3d43-a06b","text":"编码","stroke":"#ed9799","x":4546,"y":3799,"layout":null,"isExpand":true,"pid":"fd52f39f-5f40-2eff"},{"id":"bbefb081-b28c-f12e","text":"场景","stroke":"#ed9799","x":4546,"y":3851.5,"layout":null,"isExpand":true,"pid":"fd52f39f-5f40-2eff"},{"id":"e35b2857-7878-7f1a","text":"为什么快？","stroke":"#d5c2fc","x":4540,"y":3931.5,"layout":null,"isExpand":true,"pid":"457e811b-f28c-1b54"},{"id":"748a80ca-963e-7555","text":"通知取代轮询","stroke":"#d5c2fc","x":4679,"y":4001.5,"layout":null,"isExpand":true,"pid":"6b511a0f-31b8-835d"},{"id":"35dd5149-7ddd-036e","text":"定义","stroke":"#d5c2fc","x":4540,"y":4106.5,"layout":null,"isExpand":true,"pid":"e16006d5-f301-6206"},{"id":"2dfc847f-4fef-f29a","text":"缺点","stroke":"#d5c2fc","x":4540,"y":4141.5,"layout":null,"isExpand":true,"pid":"e16006d5-f301-6206"},{"id":"1dd5c765-a22a-0e61","text":"Redis优化","stroke":"#d5c2fc","x":4540,"y":4176.5,"layout":null,"isExpand":true,"pid":"e16006d5-f301-6206"},{"id":"d055e74e-faf6-0c57","text":"在淘汰时候，他会去检测一下上次的访问和最近访问的时间的衰减再去淘汰","stroke":"#d5c2fc","x":4538,"y":4211.5,"layout":null,"isExpand":true,"pid":"a1fac8f3-5429-2273"},{"id":"1b276953-c354-3d83","text":"随机释放","stroke":"#d5c2fc","x":4562,"y":4267.5,"layout":null,"isExpand":true,"pid":"5a14ba47-4cbb-9824"},{"id":"4b6609c5-035a-f67d","text":"优先回收存活时间少的键","stroke":"#d5c2fc","x":4520,"y":4302.5,"layout":null,"isExpand":true,"pid":"e6088bd1-9123-30ed"},{"id":"88274345-3b50-b5f9","text":"每次读写的时候","stroke":"#d5c2fc","x":4652,"y":4337.5,"layout":null,"isExpand":true,"pid":"bc577c34-e178-8153"},{"id":"04204c49-c428-0ecf","text":"主动命令","stroke":"#d5c2fc","x":4524,"y":4390,"layout":null,"isExpand":true,"pid":"d397acb0-ec97-fb71"},{"id":"e6d5caa3-baa8-c898","text":"持久化阈值","stroke":"#d5c2fc","x":4524,"y":4442.5,"layout":null,"isExpand":true,"pid":"d397acb0-ec97-fb71"},{"id":"f19d38aa-e7c1-8bcb","text":"正常关闭之前","stroke":"#d5c2fc","x":4524,"y":4477.5,"layout":null,"isExpand":true,"pid":"d397acb0-ec97-fb71"},{"id":"c58d551f-6e60-7f6b","text":"RDB(快照)","stroke":"#d5c2fc","x":4540,"y":4512.5,"isExpand":true,"layout":null,"pid":"a4fe3bc5-1255-4923"},{"id":"b87fe5fd-d23f-7faf","text":"AOF(命令),**有AOF只会用AOF**","stroke":"#d5c2fc","x":4540,"y":4582.5,"layout":null,"isExpand":true,"pid":"a4fe3bc5-1255-4923"},{"id":"e637790a-e872-1c54","text":"雪崩","stroke":"#d5c2fc","x":4508,"y":4708,"layout":null,"isExpand":true,"pid":"7f30ba78-6902-a2bc"},{"id":"6a5fe5c6-f80e-2935","text":"击穿","stroke":"#d5c2fc","x":4508,"y":4844.5,"layout":null,"isExpand":true,"pid":"7f30ba78-6902-a2bc"},{"id":"6a13b554-8898-2579","text":"穿透","stroke":"#d5c2fc","x":4508,"y":4953,"layout":null,"isExpand":true,"pid":"7f30ba78-6902-a2bc"},{"id":"9f1fac26-d5d8-7868","text":"Cache Aside Pattern 旁路缓存","stroke":"#d5c2fc","x":4508,"y":5005.5,"layout":null,"isExpand":true,"pid":"6f51453f-aff2-d804"},{"id":"de25157a-a098-41bd","text":"读穿透模式","stroke":"#d5c2fc","x":4508,"y":5051,"layout":null,"isExpand":true,"pid":"6f51453f-aff2-d804"},{"id":"00782d33-13dd-d5ae","text":"写穿透","stroke":"#d5c2fc","x":4508,"y":5107,"layout":null,"isExpand":true,"pid":"6f51453f-aff2-d804"},{"id":"7960c418-7f37-4382","text":"异步缓存写入","stroke":"#d5c2fc","x":4508,"y":5152.5,"layout":null,"isExpand":true,"pid":"6f51453f-aff2-d804"},{"id":"ffc044b5-d6da-4235","text":"四大特性","stroke":"#d5c2fc","x":4556,"y":5488,"layout":null,"isExpand":true,"pid":"75c88efa-0f06-fdaf"},{"id":"a7feb59c-f346-0783","text":"注意","stroke":"#d5c2fc","x":4556,"y":5823.5,"layout":null,"isExpand":true,"pid":"75c88efa-0f06-fdaf"},{"id":"df9434ca-4f29-8cfb","text":"为什么？--实现更高的读写","stroke":"#d5c2fc","x":4524,"y":5858.5,"layout":null,"isExpand":true,"pid":"66135795-768c-a0d8"},{"id":"b28d5f4c-e53d-91d4","text":"是什么？--对外的服务方案，多个redis合作","stroke":"#d5c2fc","x":4524,"y":5893.5,"layout":null,"isExpand":true,"pid":"66135795-768c-a0d8"},{"id":"4050d28d-0d90-89a2","text":"怎么做？","stroke":"#d5c2fc","x":4524,"y":5946,"layout":null,"isExpand":true,"pid":"66135795-768c-a0d8"},{"id":"4d03a4f1-8130-92ef","text":"set、set  xx nx","stroke":"#ed9799","x":4627,"y":1561.5,"layout":null,"isExpand":true,"pid":"8c24e773-adfe-38cc","style":{}},{"id":"bf974a10-0641-51e1","text":"三种编码","stroke":"#ed9799","x":4627,"y":1631.5,"layout":null,"isExpand":true,"pid":"3df8f88b-cc9b-7d84","style":{}},{"id":"1c8ecd05-7cb8-0af3","text":"SDS和RedisOject","stroke":"#ed9799","x":4627,"y":1817,"layout":null,"isExpand":true,"pid":"3df8f88b-cc9b-7d84"},{"id":"fa43dccd-cf4f-7297","text":"缓存","stroke":"#ed9799","x":4691,"y":1967.5,"layout":null,"isExpand":true,"pid":"7abd5e52-50e2-0035","style":{}},{"id":"cb3a92ab-bcb2-1b4c","text":"分布式锁","stroke":"#ed9799","x":4691,"y":2002.5,"layout":null,"isExpand":true,"pid":"7abd5e52-50e2-0035","style":{}},{"id":"bfda25f4-f57e-a7dc","text":"lpush,rpush,llen,lpop,rpop,DEL,unlink","stroke":"#ed9799","x":4605,"y":2037.5,"layout":null,"isExpand":true,"pid":"c392f542-4a87-7034"},{"id":"9b034ddb-7c31-1966","text":"ziplist","stroke":"#ed9799","x":4605,"y":2177.5,"layout":null,"isExpand":true,"pid":"8bdb41f6-9fc2-4bbb","style":{"background-color":"rgb(16, 151, 232)"}},{"id":"564ff6ff-69eb-46b4","text":"linkedList","stroke":"#ed9799","x":4605,"y":2317.5,"layout":null,"isExpand":true,"pid":"8bdb41f6-9fc2-4bbb"},{"id":"b9601e29-7594-3146","text":"quickList","stroke":"#ed9799","x":4605,"y":2370,"layout":null,"isExpand":true,"pid":"8bdb41f6-9fc2-4bbb"},{"id":"8b18a044-b92c-373d","text":"list场景","stroke":"#ed9799","x":4605,"y":2422.5,"layout":null,"isExpand":true,"pid":"7e7689ae-ed23-39c6"},{"id":"2a1aac0f-bd16-54ea","text":"创建","stroke":"#ed9799","x":4609,"y":2457.5,"layout":null,"isExpand":true,"pid":"951b47e5-97af-9324"},{"id":"cc6bf28a-725b-ea0f","text":"查询","stroke":"#ed9799","x":4609,"y":2565,"layout":null,"isExpand":true,"pid":"951b47e5-97af-9324"},{"id":"7b7b44cd-5a52-2a13","text":"更新","stroke":"#ed9799","x":4609,"y":2672.5,"layout":null,"isExpand":true,"pid":"951b47e5-97af-9324"},{"id":"656f3cb1-fcdc-a043","text":"删除","stroke":"#ed9799","x":4609,"y":2707.5,"layout":null,"isExpand":true,"pid":"951b47e5-97af-9324"},{"id":"c04f1a81-de2f-6a30","text":"intSet","stroke":"#ed9799","x":4609,"y":2781,"layout":null,"isExpand":true,"pid":"83b9d453-6e7d-ece5"},{"id":"707d6609-0b8f-44e5","text":"hashTable","stroke":"#ed9799","x":4609,"y":2854.5,"layout":null,"isExpand":true,"pid":"83b9d453-6e7d-ece5","style":{"background-color":"#B386B8"}},{"id":"544b5144-e2ad-fe9b","text":"去重","stroke":"#ed9799","x":4609,"y":2889.5,"layout":null,"isExpand":true,"pid":"06a60b11-a19b-5778"},{"id":"41894ecb-8ee7-5b2f","text":"HSET、HSETNX、HLEN、HDEL、HGETALL","stroke":"#ed9799","x":4620,"y":2924.5,"layout":null,"isExpand":true,"pid":"11f53334-aa5a-ea03"},{"id":"ff4dc135-581c-35f0","text":"ziplist","stroke":"#ed9799","x":4620,"y":2977,"layout":null,"isExpand":true,"pid":"dd67de97-be78-9283","style":{"background-color":"rgb(16, 151, 232)"}},{"id":"c5422061-f1c9-41e2","text":"hashTable","stroke":"#ed9799","x":4620,"y":3090.5,"layout":null,"isExpand":true,"pid":"dd67de97-be78-9283","style":{"background-color":"#B386B8"}},{"id":"e8f37981-e73e-f1a8","text":"字典场景，学生分数，任务分配等","stroke":"#ed9799","x":4620,"y":3186.5,"layout":null,"isExpand":true,"pid":"88304d65-e333-0674"},{"id":"7fc4eb9b-b26c-60ac","text":"表头中有used表示已经使用的节点数量","stroke":"#ed9799","x":4658,"y":3221.5,"layout":null,"isExpand":true,"pid":"5c0df425-61cd-a71c"},{"id":"77360cf4-73d1-484a","text":"size和sizemak，sizemask和哈希值一起决定索引","stroke":"#ed9799","x":4658,"y":3256.5,"layout":null,"isExpand":true,"pid":"5c0df425-61cd-a71c"},{"id":"9714a901-1bab-ad49","text":"table指向实际的hash存储","stroke":"#ed9799","x":4658,"y":3291.5,"layout":null,"isExpand":true,"pid":"5c0df425-61cd-a71c"},{"id":"f843d25e-c084-ce8d","text":"渐进式扩容，t0和t1","stroke":"#ed9799","x":4658,"y":3326.5,"layout":null,"isExpand":true,"pid":"305bc6c2-edc9-820b"},{"id":"299c2c63-f96b-81d3","text":"缩容，渐进式缩容","stroke":"#ed9799","x":4658,"y":3361.5,"layout":null,"isExpand":true,"pid":"305bc6c2-edc9-820b"},{"id":"66f6cb74-0222-8395","text":"多级索引","stroke":"#ed9799","x":4617,"y":3396.5,"layout":null,"isExpand":true,"pid":"4239920a-8b69-04e8"},{"id":"0d2a9adc-befd-22ec","text":"节点数据是score","stroke":"#ed9799","x":4617,"y":3431.5,"layout":null,"isExpand":true,"pid":"4239920a-8b69-04e8"},{"id":"877d6637-9ff5-5739","text":"表头定义了length，查询总数负载度为O(1)","stroke":"#ed9799","x":4617,"y":3466.5,"layout":null,"isExpand":true,"pid":"4239920a-8b69-04e8"},{"id":"c522987f-3b6c-4076","text":"是zset的底层数据结构","stroke":"#ed9799","x":4617,"y":3501.5,"layout":null,"isExpand":true,"pid":"11da8632-96c9-6644"},{"id":"7d94ac89-7c24-c50a","text":"随机化层数，5.0.5版本最高为64层","stroke":"#ed9799","x":4617,"y":3536.5,"layout":null,"isExpand":true,"pid":"fd4a3bd8-280b-a272"},{"id":"9a1dc790-d21c-5f43","text":"查询效率媲美二分查找，负载度为O(logN)","stroke":"#ed9799","x":4617,"y":3571.5,"layout":null,"isExpand":true,"pid":"fd4a3bd8-280b-a272"},{"id":"0bbd32bb-81f8-0705","text":"节点层高是创建时就确认了，不会被新插入节点影响","stroke":"#ed9799","x":4617,"y":3606.5,"layout":null,"isExpand":true,"pid":"fd4a3bd8-280b-a272","style":{"background-color":"red"}},{"id":"618e15b0-0f54-35d0","text":"创建","stroke":"#ed9799","x":4616,"y":3641.5,"layout":null,"isExpand":true,"pid":"0233fb55-7b2e-f48b"},{"id":"dd967974-8553-8224","text":"查询","stroke":"#ed9799","x":4616,"y":3676.5,"layout":null,"isExpand":true,"pid":"0233fb55-7b2e-f48b"},{"id":"dfa914e7-0f84-0ecd","text":"更新","stroke":"#ed9799","x":4616,"y":3711.5,"layout":null,"isExpand":true,"pid":"0233fb55-7b2e-f48b"},{"id":"e91eafa1-0e28-b747","text":"删除","stroke":"#ed9799","x":4616,"y":3746.5,"layout":null,"isExpand":true,"pid":"0233fb55-7b2e-f48b"},{"id":"6e535031-b723-a744","text":"Ziplist","stroke":"#ed9799","x":4616,"y":3781.5,"layout":null,"isExpand":true,"pid":"5b577f16-3d43-a06b","style":{"background-color":"rgb(16, 151, 232)"}},{"id":"2e748638-6b65-6cd7","text":"跳表+HashTable","stroke":"#ed9799","x":4616,"y":3816.5,"layout":null,"isExpand":true,"pid":"5b577f16-3d43-a06b","style":{"background-color":"#3E76A5"}},{"id":"170e57ee-277b-224b","text":"排行榜、分数相关","stroke":"#ed9799","x":4616,"y":3851.5,"layout":null,"isExpand":true,"pid":"bbefb081-b28c-f12e"},{"id":"109924c3-97e2-4d75","text":"内存操作很快","stroke":"#d5c2fc","x":4658,"y":3896.5,"layout":null,"isExpand":true,"pid":"e35b2857-7878-7f1a"},{"id":"827a853c-7ae9-58ff","text":"高效的数据结构","stroke":"#d5c2fc","x":4658,"y":3931.5,"layout":null,"isExpand":true,"pid":"e35b2857-7878-7f1a"},{"id":"e4415564-f31e-9490","text":"IO多路复用","stroke":"#d5c2fc","x":4658,"y":3966.5,"layout":null,"isExpand":true,"pid":"e35b2857-7878-7f1a","style":{"background-color":"#D8B24D"}},{"id":"1afbebb8-9a0f-d162","text":"淘汰最近最久未使用的数据，latest Recently Used","stroke":"#d5c2fc","x":4610,"y":4106.5,"layout":null,"isExpand":true,"pid":"35dd5149-7ddd-036e"},{"id":"daee66e7-c496-1e2d","text":"忽略频率","stroke":"#d5c2fc","x":4610,"y":4141.5,"layout":null,"isExpand":true,"pid":"2dfc847f-4fef-f29a"},{"id":"7a55b4c1-3444-3c97","text":"候选池","stroke":"#d5c2fc","x":4651,"y":4176.5,"layout":null,"isExpand":true,"pid":"1dd5c765-a22a-0e61"},{"id":"21360dab-06c3-e728","text":"save--主动save","stroke":"#d5c2fc","x":4626,"y":4372.5,"layout":null,"isExpand":true,"pid":"04204c49-c428-0ecf"},{"id":"23fcfd96-8f01-2ade","text":"bgsave--异步save，创建一个子进程save","stroke":"#d5c2fc","x":4626,"y":4407.5,"layout":null,"isExpand":true,"pid":"04204c49-c428-0ecf"},{"id":"4a3d2a1a-2e22-1e86","text":"写时复制，bgsave","stroke":"#d5c2fc","x":4654,"y":4512.5,"layout":null,"isExpand":true,"pid":"c58d551f-6e60-7f6b"},{"id":"97dc6777-3757-a1de","text":"写回策略","stroke":"#d5c2fc","x":4789,"y":4547.5,"layout":null,"isExpand":true,"pid":"b87fe5fd-d23f-7faf"},{"id":"54d9f707-9b02-6334","text":"重写机制","stroke":"#d5c2fc","x":4789,"y":4582.5,"layout":null,"isExpand":true,"pid":"b87fe5fd-d23f-7faf"},{"id":"e472cc3f-271b-2555","text":"同样有写时复制","stroke":"#d5c2fc","x":4789,"y":4617.5,"layout":null,"isExpand":true,"pid":"b87fe5fd-d23f-7faf"},{"id":"b56c89df-07c4-2c31","text":"特殊原因（过期、应用异常）所有请求（大量请求）直接打向DB","stroke":"#d5c2fc","x":4578,"y":4662.5,"layout":null,"isExpand":true,"pid":"e637790a-e872-1c54"},{"id":"52dd57c2-d647-1e33","text":"解决方案","stroke":"#d5c2fc","x":4578,"y":4736,"layout":null,"isExpand":true,"pid":"e637790a-e872-1c54"},{"id":"ad9ef42d-5c73-6f7f","text":"缓存过期，大量数据请求发送到D\nB","stroke":"#d5c2fc","x":4578,"y":4788.5,"layout":null,"isExpand":true,"pid":"6a5fe5c6-f80e-2935"},{"id":"d6df1a81-575a-6afe","text":"解决方案","stroke":"#d5c2fc","x":4578,"y":4872.5,"layout":null,"isExpand":true,"pid":"6a5fe5c6-f80e-2935"},{"id":"6f76d127-07fb-7edb","text":"不存在的key攻击","stroke":"#d5c2fc","x":4578,"y":4935.5,"layout":null,"isExpand":true,"pid":"6a13b554-8898-2579"},{"id":"91aacbd1-76e8-0149","text":"解决方法","stroke":"#d5c2fc","x":4578,"y":4970.5,"layout":null,"isExpand":true,"pid":"6a13b554-8898-2579"},{"id":"3613ff91-717d-5bdd","text":"作为旁路，读操作先查缓存，写操作删除缓存，主要还是这个","stroke":"#d5c2fc","x":4760,"y":5005.5,"layout":null,"isExpand":true,"pid":"9f1fac26-d5d8-7868"},{"id":"c0efab5d-52e1-e264","text":"封装成服务，只有读，读操作类似于旁路缓存，但是多一次服务调用","stroke":"#d5c2fc","x":4626,"y":5040.5,"layout":null,"isExpand":true,"pid":"de25157a-a098-41bd"},{"id":"3370723d-eaf0-70de","text":"封装成服务，只有写，服务自己先写入数据库，再写入缓存，配合读穿透","stroke":"#d5c2fc","x":4594,"y":5096.5,"layout":null,"isExpand":true,"pid":"00782d33-13dd-d5ae"},{"id":"b70b2572-ad41-bccc","text":"异步写，收集写操作，安全性不够","stroke":"#d5c2fc","x":4642,"y":5152.5,"layout":null,"isExpand":true,"pid":"7960c418-7f37-4382"},{"id":"a311a229-04c9-bd86","text":"互斥性","stroke":"#d5c2fc","x":4658,"y":5187.5,"layout":null,"isExpand":true,"pid":"ffc044b5-d6da-4235"},{"id":"a0fa2aec-39fa-bf03","text":"安全性","stroke":"#d5c2fc","x":4658,"y":5222.5,"layout":null,"isExpand":true,"pid":"ffc044b5-d6da-4235"},{"id":"e3e0d8b6-cdfd-1d23","text":"对称性","stroke":"#d5c2fc","x":4658,"y":5257.5,"layout":null,"isExpand":true,"pid":"ffc044b5-d6da-4235"},{"id":"0d41b66e-ccf3-5e5d","text":"可靠性","stroke":"#d5c2fc","x":4658,"y":5540.5,"layout":null,"isExpand":true,"pid":"ffc044b5-d6da-4235"},{"id":"1da2b4da-a6e5-9643","text":"NPC困境，没有绝对可靠的分布式锁","stroke":"#d5c2fc","x":4626,"y":5823.5,"layout":null,"isExpand":true,"pid":"a7feb59c-f346-0783"},{"id":"500d030d-95ce-eb57","text":"命令","stroke":"#d5c2fc","x":4626,"y":5928.5,"layout":null,"isExpand":true,"pid":"4050d28d-0d90-89a2"},{"id":"bd419691-1044-db46","text":"分配hash槽 16383个hash槽","stroke":"#d5c2fc","x":4626,"y":5963.5,"layout":null,"isExpand":true,"pid":"4050d28d-0d90-89a2"},{"id":"a0ec5f6f-3f86-cf2d","text":"int","stroke":"#ed9799","x":4729,"y":1596.5,"layout":null,"isExpand":true,"pid":"bf974a10-0641-51e1","style":{}},{"id":"00658dd8-d1a6-7a5b","text":"embstr","stroke":"#ed9799","x":4729,"y":1631.5,"layout":null,"isExpand":true,"pid":"bf974a10-0641-51e1","style":{}},{"id":"01d4f765-8b20-c0f7","text":"raw","stroke":"#ed9799","x":4729,"y":1666.5,"layout":null,"isExpand":true,"pid":"bf974a10-0641-51e1","style":{}},{"id":"e82546c2-9a26-1b54","text":"SDS","stroke":"#ed9799","x":4792,"y":1789,"layout":null,"isExpand":true,"pid":"1c8ecd05-7cb8-0af3","style":{"background-color":"rgb(67, 160, 71)"}},{"id":"57d7391a-970d-f04a","text":"RedisObj","stroke":"#ed9799","x":4792,"y":1922,"layout":null,"isExpand":true,"pid":"1c8ecd05-7cb8-0af3"},{"id":"f6934b2f-e1a2-8a71","text":"优点","stroke":"#ed9799","x":4683,"y":2072.5,"layout":null,"isExpand":true,"pid":"9b034ddb-7c31-1966"},{"id":"302e2066-fd54-cd6d","text":"缺点","stroke":"#ed9799","x":4683,"y":2125,"layout":null,"isExpand":true,"pid":"9b034ddb-7c31-1966"},{"id":"3f44bd77-9c56-4c0b","text":"条件","stroke":"#ed9799","x":4683,"y":2195,"layout":null,"isExpand":true,"pid":"9b034ddb-7c31-1966"},{"id":"2012959a-680c-7caa","text":"结构","stroke":"#ed9799","x":4683,"y":2265,"layout":null,"isExpand":true,"pid":"9b034ddb-7c31-1966"},{"id":"c3bf6743-a1a3-05aa","text":"结构：表头定义了len，long类型，所以查询节点复杂度是O(1)","stroke":"#ed9799","x":4710,"y":2317.5,"layout":null,"isExpand":true,"pid":"564ff6ff-69eb-46b4"},{"id":"68e249bf-a995-2ae9","text":"结构","stroke":"#ed9799","x":4705,"y":2352.5,"layout":null,"isExpand":true,"pid":"b9601e29-7594-3146"},{"id":"c0aee706-0a24-6b74","text":"3.2版本以后用的都是quickList","stroke":"#ed9799","x":4705,"y":2387.5,"layout":null,"isExpand":true,"pid":"b9601e29-7594-3146","style":{"background-color":"#7ADD99"}},{"id":"5346db27-79b1-ba0a","text":"SADD","stroke":"#ed9799","x":4679,"y":2457.5,"layout":null,"isExpand":true,"pid":"2a1aac0f-bd16-54ea"},{"id":"315c64ea-01ab-e88a","text":"- SISMEMBR : 查询是否为成员\n - SISMEMBRS : 返回集合中所有成员的列表 \n        - SCCARD： 返回集合中成员个数\n        - SSCAN : 遍历，后面跟下标和count，还可以用match进行模糊查询\n        - SINTER : 以前面的集合判断交集\n        - SUNION：并集\n        - SDIFF：different 多个set的去重，以前面的为基准","stroke":"#ed9799","x":4679,"y":2492.5,"layout":null,"isExpand":true,"pid":"cc6bf28a-725b-ea0f"},{"id":"d5a8e2ce-e29c-bf0e","text":"SADD","stroke":"#ed9799","x":4679,"y":2672.5,"layout":null,"isExpand":true,"pid":"7b7b44cd-5a52-2a13"},{"id":"99db1fcf-e871-7658","text":"DEL","stroke":"#ed9799","x":4679,"y":2707.5,"layout":null,"isExpand":true,"pid":"656f3cb1-fcdc-a043"},{"id":"9031b987-98f2-60ae","text":"条件：如果集群元素都是整数，且元素数量不超过512个，就采用inset编码","stroke":"#ed9799","x":4688,"y":2742.5,"layout":null,"isExpand":true,"pid":"c04f1a81-de2f-6a30"},{"id":"4a4c2b2c-7163-3b4b","text":"特点：节约内存，但是查询的时候要用二分查找,也就是复杂度是o(logN)","stroke":"#ed9799","x":4688,"y":2798.5,"layout":null,"isExpand":true,"pid":"c04f1a81-de2f-6a30"},{"id":"b1bf7fd1-aa71-0862","text":"性能很高，O(1)复杂度下就能找到一个元素是否存在","stroke":"#ed9799","x":4720,"y":2854.5,"layout":null,"isExpand":true,"pid":"707d6609-0b8f-44e5"},{"id":"db3037d9-9796-0cbd","text":"和list里面的ziplist编码一样的条件","stroke":"#ed9799","x":4698,"y":2977,"layout":null,"isExpand":true,"pid":"ff4dc135-581c-35f0"},{"id":"77fcdeb2-b7fe-d848","text":"和Set中存储的区别在于，Set中的value始终为null，但是Hash里面是有值的","stroke":"#ed9799","x":4731,"y":3080,"layout":null,"isExpand":true,"pid":"c5422061-f1c9-41e2"},{"id":"63e2838a-72b0-bf13","text":"新节点","stroke":"#ed9799","x":4719,"y":3396.5,"layout":null,"isExpand":true,"pid":"66f6cb74-0222-8395"},{"id":"9de6898f-c20d-615b","text":"score可以重复，增加了回退指针","stroke":"#ed9799","x":4774,"y":3431.5,"layout":null,"isExpand":true,"pid":"0d2a9adc-befd-22ec"},{"id":"33baf4ba-41c1-a4cc","text":"ZADD","stroke":"#ed9799","x":4686,"y":3641.5,"layout":null,"isExpand":true,"pid":"618e15b0-0f54-35d0"},{"id":"5dd4a48d-328d-6858","text":"ZRANGE,ZCOUNT,ZRANK","stroke":"#ed9799","x":4686,"y":3676.5,"layout":null,"isExpand":true,"pid":"dd967974-8553-8224"},{"id":"9113ab78-507d-021a","text":"ZADD,ZREM","stroke":"#ed9799","x":4686,"y":3711.5,"layout":null,"isExpand":true,"pid":"dfa914e7-0f84-0ecd"},{"id":"3024dd43-cb21-ea3d","text":"DEL,UNLINK","stroke":"#ed9799","x":4686,"y":3746.5,"layout":null,"isExpand":true,"pid":"e91eafa1-0e28-b747"},{"id":"d7542ecc-ae85-baeb","text":"看上面的条件吧","stroke":"#ed9799","x":4696,"y":3781.5,"layout":null,"isExpand":true,"pid":"6e535031-b723-a744"},{"id":"fdec5155-c3ef-dace","text":"这里是搭配使用","stroke":"#ed9799","x":4771,"y":3816.5,"note":"","layout":null,"isExpand":true,"pid":"2e748638-6b65-6cd7"},{"id":"5754e1a4-ec33-0a89","text":"加锁重建缓存","stroke":"#d5c2fc","x":4680,"y":4718.5,"layout":null,"isExpand":true,"pid":"52dd57c2-d647-1e33"},{"id":"2964e17f-1dba-908e","text":"数据过期时间随机","stroke":"#d5c2fc","x":4680,"y":4753.5,"layout":null,"isExpand":true,"pid":"52dd57c2-d647-1e33"},{"id":"13ffedd6-7117-a139","text":"热点数据续期","stroke":"#d5c2fc","x":4680,"y":4844.5,"layout":null,"isExpand":true,"pid":"d6df1a81-575a-6afe"},{"id":"53c846dd-3bfe-ddb4","text":"加互斥锁，就是set的时候先去请求锁（set key value nx ex xxx）","stroke":"#d5c2fc","x":4680,"y":4879.5,"layout":null,"isExpand":true,"pid":"d6df1a81-575a-6afe"},{"id":"5426799b-953b-5589","text":"加校验，布隆过滤器","stroke":"#d5c2fc","x":4680,"y":4970.5,"layout":null,"isExpand":true,"pid":"91aacbd1-76e8-0149"},{"id":"ee73085d-9e93-2601","text":"set命令","stroke":"#d5c2fc","x":4744,"y":5187.5,"layout":null,"isExpand":true,"pid":"a311a229-04c9-bd86"},{"id":"e66265fe-b540-5598","text":"过期时间","stroke":"#d5c2fc","x":4744,"y":5222.5,"layout":null,"isExpand":true,"pid":"a0fa2aec-39fa-bf03"},{"id":"92759ba1-9784-ef08","text":"Ownid加LUA脚本","stroke":"#d5c2fc","x":4744,"y":5257.5,"layout":null,"isExpand":true,"pid":"e3e0d8b6-cdfd-1d23"},{"id":"39e6bb90-5e89-128f","text":"多机部署","stroke":"#d5c2fc","x":4744,"y":5540.5,"layout":null,"isExpand":true,"pid":"0d41b66e-ccf3-5e5d"},{"id":"2982b4e0-8fd0-c5f8","text":"cluster meet","stroke":"#d5c2fc","x":4696,"y":5928.5,"layout":null,"isExpand":true,"pid":"500d030d-95ce-eb57"},{"id":"08307085-c3ad-5edf","text":"MOVED报错，根据格式找对应的Redis","stroke":"#d5c2fc","x":4862,"y":5963.5,"layout":null,"isExpand":true,"pid":"bd419691-1044-db46"},{"id":"774c77b6-7b2d-81e2","text":"数字，占空间小","stroke":"#ed9799","x":4784,"y":1596.5,"layout":null,"isExpand":true,"pid":"a0ec5f6f-3f86-cf2d","style":{}},{"id":"1f1c2cef-1d8e-e411","text":"一次性分配地址，占内存小，任何写操作后都变成Raw","stroke":"#ed9799","x":4816,"y":1631.5,"layout":null,"isExpand":true,"pid":"00658dd8-d1a6-7a5b","style":{}},{"id":"e0daf19f-ced7-3b81","text":"sds和RedisObj分开,阈值44","stroke":"#ed9799","x":4793,"y":1666.5,"layout":null,"isExpand":true,"pid":"01d4f765-8b20-c0f7","style":{}},{"id":"d65719ca-40ab-9e18","text":"字节头","stroke":"#ed9799","x":4863,"y":1754,"layout":null,"isExpand":true,"pid":"e82546c2-9a26-1b54"},{"id":"72ef8590-da95-d937","text":"内容buf,用来保存字符串","stroke":"#ed9799","x":4863,"y":1841.5,"layout":null,"isExpand":true,"pid":"e82546c2-9a26-1b54"},{"id":"99fcaa40-ffd0-36b0","text":"分类","stroke":"#ed9799","x":4863,"y":1876.5,"layout":null,"isExpand":true,"pid":"e82546c2-9a26-1b54"},{"id":"6574390a-7958-f96b","text":"用来存储type、和encoding，其中encodeing表示三种编码的一种","stroke":"#ed9799","x":4896,"y":1911.5,"layout":null,"isExpand":true,"pid":"57d7391a-970d-f04a"},{"id":"2103f220-7139-f1e2","text":"内存占用小","stroke":"#ed9799","x":4753,"y":2072.5,"layout":null,"isExpand":true,"pid":"f6934b2f-e1a2-8a71"},{"id":"0b7e366b-5a9f-fd2f","text":"更新成本高，所有数据移动","stroke":"#ed9799","x":4753,"y":2107.5,"layout":null,"isExpand":true,"pid":"302e2066-fd54-cd6d"},{"id":"7d51bce0-17cb-f8d6","text":"连锁更新","stroke":"#ed9799","x":4753,"y":2142.5,"layout":null,"isExpand":true,"pid":"302e2066-fd54-cd6d"},{"id":"d48827c0-06ca-0086","text":"元素数量小于512个","stroke":"#ed9799","x":4753,"y":2177.5,"layout":null,"isExpand":true,"pid":"3f44bd77-9c56-4c0b"},{"id":"3e4607af-69fb-d005","text":"字符串对象长度小于64字节","stroke":"#ed9799","x":4753,"y":2212.5,"layout":null,"isExpand":true,"pid":"3f44bd77-9c56-4c0b"},{"id":"800b7e22-9554-c715","text":"zllen：2个字节长度以内，查询节点个数O(1)","stroke":"#ed9799","x":4753,"y":2247.5,"layout":null,"isExpand":true,"pid":"2012959a-680c-7caa"},{"id":"430a7e99-0cd1-843c","text":"entry：实际数据","stroke":"#ed9799","x":4753,"y":2282.5,"layout":null,"isExpand":true,"pid":"2012959a-680c-7caa"},{"id":"e69250b5-6da7-80be","text":"linkedlist的结构，里面储存的是ziplist","stroke":"#ed9799","x":4775,"y":2352.5,"layout":null,"isExpand":true,"pid":"68e249bf-a995-2ae9"},{"id":"7e2e76cc-8ee3-e43c","text":"元素数量小于512个","stroke":"#ed9799","x":4971,"y":2959.5,"layout":null,"isExpand":true,"pid":"db3037d9-9796-0cbd"},{"id":"4293bab3-a1af-a541","text":"字符串对象长度小于64字节","stroke":"#ed9799","x":4971,"y":2994.5,"layout":null,"isExpand":true,"pid":"db3037d9-9796-0cbd"},{"id":"9a58fcef-04f3-ff15","text":"![[Paste image 1705934150311image.png]]","stroke":"#ed9799","x":5211,"y":3029.5,"layout":null,"isExpand":true,"pid":"77fcdeb2-b7fe-d848"},{"id":"0c74549d-3f09-6291","text":"命令","stroke":"#d5c2fc","x":4846,"y":5310,"layout":null,"isExpand":true,"pid":"39e6bb90-5e89-128f"},{"id":"11ce82fa-4501-5230","text":"数据同步","stroke":"#d5c2fc","x":4846,"y":5380,"layout":null,"isExpand":true,"pid":"39e6bb90-5e89-128f"},{"id":"f8f4f19a-781c-4e03","text":"主从切换","stroke":"#d5c2fc","x":4846,"y":5610.5,"layout":null,"isExpand":true,"pid":"39e6bb90-5e89-128f"},{"id":"4051b26d-f0e8-a8cf","text":"len保存长度","stroke":"#ed9799","x":4949,"y":1701.5,"layout":null,"isExpand":true,"pid":"d65719ca-40ab-9e18"},{"id":"50a9e3a7-8b5b-5034","text":"预留空间 alloc - len","stroke":"#ed9799","x":4949,"y":1736.5,"main":false,"layout":{"layoutName":"mindmap2","direct":"right"},"isExpand":true,"pid":"d65719ca-40ab-9e18"},{"id":"63dd8c0c-49ab-44a2","text":"二进制安全--不用/0为结尾，用len判断就行","stroke":"#ed9799","x":4949,"y":1771.5,"layout":null,"isExpand":true,"pid":"d65719ca-40ab-9e18"},{"id":"677bcb72-d5ec-d5ac","text":"flags:这个用来表示分类，比如sdshdr8","stroke":"#ed9799","x":4949,"y":1806.5,"layout":null,"isExpand":true,"pid":"d65719ca-40ab-9e18"},{"id":"d2209e53-ded8-bf4b","text":"有sdshdr 8, sdshdr 16等","stroke":"#ed9799","x":4933,"y":1876.5,"layout":null,"isExpand":true,"pid":"99fcaa40-ffd0-36b0"},{"id":"d5576a78-cd2b-f780","text":"这一点在Redis7.0中使用listPack优化掉了ziplist","stroke":"#ed9799","x":4855,"y":2142.5,"layout":null,"isExpand":true,"pid":"7d51bce0-17cb-f8d6","style":{"background-color":"orange"}},{"id":"bbcea65d-326b-4fc9","text":"里面有结构是prevlen，造成连锁更新的原因","stroke":"#ed9799","x":4907,"y":2282.5,"layout":null,"isExpand":true,"pid":"430a7e99-0cd1-843c"},{"id":"9ae5245d-8b60-d7df","text":"添加","stroke":"#d5c2fc","x":4916,"y":5292.5,"layout":null,"isExpand":true,"pid":"0c74549d-3f09-6291"},{"id":"9c23695b-8c12-4f19","text":"去除","stroke":"#d5c2fc","x":4916,"y":5327.5,"layout":null,"isExpand":true,"pid":"0c74549d-3f09-6291"},{"id":"db6a81a7-6b27-f1ed","text":"全量复制，只有首次添加新的slave才会触发","stroke":"#d5c2fc","x":4948,"y":5362.5,"layout":null,"isExpand":true,"pid":"11ce82fa-4501-5230"},{"id":"5641159e-c376-d6ef","text":"增量复制","stroke":"#d5c2fc","x":4948,"y":5397.5,"layout":null,"isExpand":true,"pid":"11ce82fa-4501-5230"},{"id":"540529e7-f6ae-0a83","text":"手动","stroke":"#d5c2fc","x":4948,"y":5432.5,"layout":null,"isExpand":true,"pid":"f8f4f19a-781c-4e03"},{"id":"ac018bc4-6b37-2104","text":"哨兵模式","stroke":"#d5c2fc","x":4948,"y":5628,"layout":null,"isExpand":true,"pid":"f8f4f19a-781c-4e03","style":{"color":"orange"}},{"id":"7a5d1119-bca2-6a8e","text":"salveof 或者 replicateof","stroke":"#d5c2fc","x":4986,"y":5292.5,"layout":null,"isExpand":true,"pid":"9ae5245d-8b60-d7df"},{"id":"62245c21-5c27-4e43","text":"slaveof no one","stroke":"#d5c2fc","x":4986,"y":5327.5,"layout":null,"isExpand":true,"pid":"9c23695b-8c12-4f19"},{"id":"97b025f1-be10-728a","text":"RDB快照","stroke":"#d5c2fc","x":5295,"y":5362.5,"layout":null,"isExpand":true,"pid":"db6a81a7-6b27-f1ed"},{"id":"ac56b382-b306-4606","text":"操作记录发给slave,slave复刻操作","stroke":"#d5c2fc","x":5050,"y":5397.5,"layout":null,"isExpand":true,"pid":"5641159e-c376-d6ef"},{"id":"ca54b85f-18a3-c7a0","text":"是redis进程","stroke":"#d5c2fc","x":5050,"y":5467.5,"layout":null,"isExpand":true,"pid":"ac018bc4-6b37-2104"},{"id":"9d72d579-6bd5-e576","text":"选主策略","stroke":"#d5c2fc","x":5050,"y":5575.5,"layout":null,"isExpand":true,"pid":"ac018bc4-6b37-2104"},{"id":"ed2c4ae1-62fb-b78d","text":"主leader策略","stroke":"#d5c2fc","x":5050,"y":5736,"layout":null,"isExpand":true,"pid":"ac018bc4-6b37-2104"},{"id":"3f12c00a-e7c5-448c","text":"故障不选","stroke":"#d5c2fc","x":5152,"y":5502.5,"layout":null,"isExpand":true,"pid":"9d72d579-6bd5-e576"},{"id":"c53f6602-1005-c2b3","text":"从节点多的优先","stroke":"#d5c2fc","x":5152,"y":5537.5,"layout":null,"isExpand":true,"pid":"9d72d579-6bd5-e576"},{"id":"d9baf446-2005-c0e3","text":"偏移量多的优先（数据偏移量记录写了多少数据，主服务器会把偏移量同步给从服务器，当主从偏移量一致，则数据完全同步）","stroke":"#d5c2fc","x":5152,"y":5572.5,"layout":null,"isExpand":true,"pid":"9d72d579-6bd5-e576"},{"id":"42c33d8d-f3a5-95b1","text":"一样就按runid选","stroke":"#d5c2fc","x":5152,"y":5648.5,"layout":null,"isExpand":true,"pid":"9d72d579-6bd5-e576"},{"id":"80ddcbc1-3d6d-83cd","text":"资历越老","stroke":"#d5c2fc","x":5180,"y":5683.5,"layout":null,"isExpand":true,"pid":"ed2c4ae1-62fb-b78d"},{"id":"c1061e44-a296-3ce5","text":"投票越早","stroke":"#d5c2fc","x":5180,"y":5718.5,"layout":null,"isExpand":true,"pid":"ed2c4ae1-62fb-b78d"},{"id":"aaec6920-1b77-6362","text":"超过半数","stroke":"#d5c2fc","x":5180,"y":5753.5,"layout":null,"isExpand":true,"pid":"ed2c4ae1-62fb-b78d"},{"id":"9f9a1c59-b381-8d91","text":"法定人数满足","stroke":"#d5c2fc","x":5180,"y":5788.5,"layout":null,"isExpand":true,"pid":"ed2c4ae1-62fb-b78d"}]],"induceData":[{"induceData":{"nodeId":"f843d25e-c084-ce8d","endNodeId":"299c2c63-f96b-81d3","stroke":"#666","root":"b569c3ce-c162-7626","lineType":"solid","id":1706451732759,"range":"0,1","type":"right"},"mindData":[{"id":"b569c3ce-c162-7626","text":"负载因子","x":4835,"y":3344,"layout":null,"isExpand":true,"stroke":""}]}],"wireFrameData":[],"relateLinkData":[{"startNodeId":"f5760da2-9625-c7c0","endNodeId":"707d6609-0b8f-44e5","color":"#f06","width":2,"nodeData":{"id":"5e413f3b-95c9-5301","text":"","nodeType":"relateLink","backgroundColor":"#f06","mdText":"","x":4470.6572265625,"y":3038.431396484375,"layout":null,"isExpand":true,"stroke":""},"type":"bs","dashArray":[0],"nodeHide":false,"startMarker":"circle","endMarker":"arrow","startDirect":"top","endDirect":"left","startDx":0.5802469135802469,"startDy":-0.25,"endDx":-0.06584362139918444,"endDy":0.5277777777779799,"gapsx":66.91666666666697,"gapsy":71.83333333333303,"gapex":-250.41666666666697,"gapey":1.1666666666669698,"box":{"x":4524,"y":3285.25,"x1":4603.666666666666,"y1":2867.6944444444493,"cpx1":4543.916666666667,"cpy1":3363.333333333333,"cpx2":4358.583333333333,"cpy2":2855.666666666667,"startDirect":"","startDx":0,"startDy":0,"endDirect":"","endDx":0,"endDy":0},"entryDirection":[0,-1],"exitDirection":[-1,0]},{"startNodeId":"ff4dc135-581c-35f0","endNodeId":"9b034ddb-7c31-1966","color":"#f06","width":2,"nodeData":{"id":"d82d93e6-32ca-af5c","text":"","nodeType":"relateLink","backgroundColor":"#f06","x":4495.984375,"y":2564.335693359375,"layout":null,"isExpand":true,"stroke":"","mdText":""},"type":"bs","dashArray":[0],"nodeHide":false,"startMarker":"circle","endMarker":"arrow","startDirect":"top","endDirect":"bottom","startDx":0.4583333333333333,"startDy":-0.25,"endDx":0.01388888888883836,"endDy":1.1666666666666476,"gapsx":17.5,"gapsy":-125.41666666666652,"gapex":-301.5,"gapey":189.91666666666652,"box":{"x":4642,"y":2970.75,"x1":4605.666666666664,"y1":2206.666666666666,"cpx1":4637.5,"cpy1":2851.5833333333335,"cpx2":4303.5,"cpy2":2367.4166666666665,"startDirect":"","startDx":0,"startDy":0,"endDirect":"","endDx":0,"endDy":0},"entryDirection":[0,-1],"exitDirection":[0,1]},{"startNodeId":"6e535031-b723-a744","endNodeId":"ff4dc135-581c-35f0","color":"#f06","width":2,"nodeData":{"id":"0a68d3ba-5a50-01cd","text":"","nodeType":"relateLink","backgroundColor":"#f06","mdText":"","x":4407.10986328125,"y":3389.93359375,"layout":null,"isExpand":true,"stroke":""},"type":"bs","dashArray":[0],"nodeHide":false,"startMarker":"circle","endMarker":"arrow","startDirect":"left","endDirect":"leftbottom","startDx":-0.12,"startDy":0.5416666666666666,"endDx":-0.125,"endDy":1.25,"gapsx":-153.16666666666697,"gapsy":-71.25,"gapex":-371.83333333333303,"gapey":340.75,"box":{"x":4610,"y":3795.0416666666665,"x1":4614,"y1":3008.25,"cpx1":4462.833333333333,"cpy1":3710.25,"cpx2":4248.166666666667,"cpy2":3317.75,"startDirect":"","startDx":0,"startDy":0,"endDirect":"","endDx":0,"endDy":0},"entryDirection":[-1,0],"exitDirection":[-1,0]}],"calloutData":[]}
```
