---
mindmap-plugin: rich
created: 2024-01-22
updated: 2024-01-22
Type: 总结
Status: ⌛️ 等待
tags:
---

# Redis知识结构
``` json
{"theme":"","mindData":[[{"id":"8a515b0d-5e32-cc41","text":"Redis知识结构","isRoot":true,"main":true,"x":4000,"y":4000,"isExpand":true,"layout":{"layoutName":"mindmap2","direct":"right"},"stroke":"","style":{}},{"id":"17df2905-d5e4-346f","text":"底层原理","stroke":"#ed9799","x":4248,"y":3393.5,"layout":null,"isExpand":true,"pid":"8a515b0d-5e32-cc41","style":{}},{"id":"dd54f90b-bb0b-c2e7","text":"运用","stroke":"#f2bf18","x":4248,"y":4628,"layout":null,"isExpand":true,"pid":"8a515b0d-5e32-cc41","style":{}},{"id":"bd799757-575f-39b8","text":"数据结构","stroke":"#ed9799","x":4375,"y":3350,"layout":null,"isExpand":true,"pid":"17df2905-d5e4-346f","style":{}},{"id":"d30e5f45-772f-da54","text":"特性","stroke":"#ed9799","x":4375,"y":4523.5,"layout":null,"isExpand":true,"pid":"17df2905-d5e4-346f","style":{}},{"id":"a48f047f-4255-11d6","text":"作为缓存","stroke":"#f2bf18","x":4336,"y":4601.5,"layout":null,"isExpand":true,"pid":"dd54f90b-bb0b-c2e7","style":{}},{"id":"eb16f0df-88f8-b5c2","text":"分布式场景","stroke":"#f2bf18","x":4336,"y":4635.5,"layout":null,"isExpand":true,"pid":"dd54f90b-bb0b-c2e7","style":{}},{"id":"62fe2320-dfe1-1d7f","text":"消息队列","stroke":"#f2bf18","x":4336,"y":4669.5,"layout":null,"isExpand":true,"pid":"dd54f90b-bb0b-c2e7","style":{}},{"id":"ed0ac47c-161e-15a9","text":"String","stroke":"#ed9799","x":4477,"y":2457.5,"main":false,"layout":null,"isExpand":true,"pid":"bd799757-575f-39b8","style":{}},{"id":"b472d6b6-958f-93e8","text":"list","stroke":"#ed9799","x":4477,"y":2891.5,"layout":null,"isExpand":true,"pid":"bd799757-575f-39b8","style":{}},{"id":"2038f0bb-c590-657c","text":"Set","stroke":"#ed9799","x":4477,"y":3316.5,"layout":null,"isExpand":true,"pid":"bd799757-575f-39b8","style":{}},{"id":"0c77757e-e754-b5c3","text":"hash","stroke":"#ed9799","x":4477,"y":3682,"layout":null,"isExpand":true,"pid":"bd799757-575f-39b8","style":{}},{"id":"f5760da2-9625-c7c0","text":"hashTable","stroke":"#ed9799","x":4477,"y":3911.5,"layout":null,"isExpand":true,"pid":"bd799757-575f-39b8","style":{"background-color":"#B386B8"}},{"id":"813b96aa-ce61-bc61","text":"跳表","stroke":"#ed9799","x":4477,"y":4115.5,"layout":null,"isExpand":true,"pid":"bd799757-575f-39b8","style":{"background-color":"#3E76A5"}},{"id":"fd52f39f-5f40-2eff","text":"Zset","stroke":"#ed9799","x":4477,"y":4353.5,"layout":null,"isExpand":true,"pid":"bd799757-575f-39b8","style":{}},{"id":"6b511a0f-31b8-835d","text":"IO多路复用","stroke":"#ed9799","x":4445,"y":4489.5,"isExpand":true,"layout":null,"pid":"d30e5f45-772f-da54","style":{}},{"id":"39f3a4d1-ae47-ab1e","text":"单线程","stroke":"#ed9799","x":4445,"y":4523.5,"layout":null,"isExpand":true,"pid":"d30e5f45-772f-da54","style":{}},{"id":"9ea516ba-83bf-c539","text":"内存淘汰策略","stroke":"#ed9799","x":4445,"y":4557.5,"layout":null,"isExpand":true,"pid":"d30e5f45-772f-da54","style":{}},{"id":"8c24e773-adfe-38cc","text":"操作","stroke":"#ed9799","x":4557,"y":2244.5,"layout":null,"isExpand":true,"pid":"ed0ac47c-161e-15a9","style":{}},{"id":"3df8f88b-cc9b-7d84","text":"编码","stroke":"#ed9799","x":4557,"y":2440.5,"layout":null,"isExpand":true,"pid":"ed0ac47c-161e-15a9","style":{}},{"id":"7abd5e52-50e2-0035","text":"实际运用场景","stroke":"#ed9799","x":4557,"y":2653.5,"layout":null,"isExpand":true,"pid":"ed0ac47c-161e-15a9","style":{}},{"id":"c392f542-4a87-7034","text":"操作","stroke":"#ed9799","x":4535,"y":2704.5,"layout":null,"isExpand":true,"pid":"b472d6b6-958f-93e8"},{"id":"8bdb41f6-9fc2-4bbb","text":"编码","stroke":"#ed9799","x":4535,"y":2891.5,"layout":null,"isExpand":true,"pid":"b472d6b6-958f-93e8"},{"id":"7e7689ae-ed23-39c6","text":"场景","stroke":"#ed9799","x":4535,"y":3078.5,"layout":null,"isExpand":true,"pid":"b472d6b6-958f-93e8"},{"id":"951b47e5-97af-9324","text":"操作","stroke":"#ed9799","x":4539,"y":3230.5,"layout":null,"isExpand":true,"pid":"2038f0bb-c590-657c"},{"id":"83b9d453-6e7d-ece5","text":"结构","stroke":"#ed9799","x":4539,"y":3434.5,"layout":null,"isExpand":true,"pid":"2038f0bb-c590-657c"},{"id":"06a60b11-a19b-5778","text":"场景","stroke":"#ed9799","x":4539,"y":3520.5,"layout":null,"isExpand":true,"pid":"2038f0bb-c590-657c"},{"id":"11f53334-aa5a-ea03","text":"操作","stroke":"#ed9799","x":4550,"y":3554.5,"layout":null,"isExpand":true,"pid":"0c77757e-e754-b5c3"},{"id":"dd67de97-be78-9283","text":"编码","stroke":"#ed9799","x":4550,"y":3682,"layout":null,"isExpand":true,"pid":"0c77757e-e754-b5c3"},{"id":"88304d65-e333-0674","text":"场景","stroke":"#ed9799","x":4550,"y":3809.5,"layout":null,"isExpand":true,"pid":"0c77757e-e754-b5c3"},{"id":"5c0df425-61cd-a71c","text":"结构","stroke":"#ed9799","x":4588,"y":3877.5,"layout":null,"isExpand":true,"pid":"f5760da2-9625-c7c0"},{"id":"305bc6c2-edc9-820b","text":"特性","stroke":"#ed9799","x":4588,"y":3962.5,"layout":null,"isExpand":true,"pid":"f5760da2-9625-c7c0"},{"id":"4239920a-8b69-04e8","text":"结构","stroke":"#ed9799","x":4547,"y":4047.5,"layout":null,"isExpand":true,"pid":"813b96aa-ce61-bc61"},{"id":"11da8632-96c9-6644","text":"场景","stroke":"#ed9799","x":4547,"y":4115.5,"layout":null,"isExpand":true,"pid":"813b96aa-ce61-bc61"},{"id":"fd4a3bd8-280b-a272","text":"特性","stroke":"#ed9799","x":4547,"y":4183.5,"layout":null,"isExpand":true,"pid":"813b96aa-ce61-bc61"},{"id":"0233fb55-7b2e-f48b","text":"操作","stroke":"#ed9799","x":4546,"y":4302.5,"layout":null,"isExpand":true,"pid":"fd52f39f-5f40-2eff"},{"id":"5b577f16-3d43-a06b","text":"编码","stroke":"#ed9799","x":4546,"y":4404.5,"layout":null,"isExpand":true,"pid":"fd52f39f-5f40-2eff"},{"id":"bbefb081-b28c-f12e","text":"场景","stroke":"#ed9799","x":4546,"y":4455.5,"layout":null,"isExpand":true,"pid":"fd52f39f-5f40-2eff"},{"id":"4d03a4f1-8130-92ef","text":"set、set  xx nx","stroke":"#ed9799","x":4627,"y":2244.5,"layout":null,"isExpand":true,"pid":"8c24e773-adfe-38cc","style":{}},{"id":"bf974a10-0641-51e1","text":"三种编码","stroke":"#ed9799","x":4627,"y":2312.5,"layout":null,"isExpand":true,"pid":"3df8f88b-cc9b-7d84","style":{}},{"id":"1c8ecd05-7cb8-0af3","text":"SDS和RedisOject","stroke":"#ed9799","x":4627,"y":2491.5,"layout":null,"isExpand":true,"pid":"3df8f88b-cc9b-7d84"},{"id":"fa43dccd-cf4f-7297","text":"缓存","stroke":"#ed9799","x":4691,"y":2636.5,"layout":null,"isExpand":true,"pid":"7abd5e52-50e2-0035","style":{}},{"id":"cb3a92ab-bcb2-1b4c","text":"分布式锁","stroke":"#ed9799","x":4691,"y":2670.5,"layout":null,"isExpand":true,"pid":"7abd5e52-50e2-0035","style":{}},{"id":"bfda25f4-f57e-a7dc","text":"lpush,rpush,llen,lpop,rpop,DEL,unlink","stroke":"#ed9799","x":4605,"y":2704.5,"layout":null,"isExpand":true,"pid":"c392f542-4a87-7034"},{"id":"9b034ddb-7c31-1966","text":"ziplist","stroke":"#ed9799","x":4605,"y":2840.5,"layout":null,"isExpand":true,"pid":"8bdb41f6-9fc2-4bbb","style":{"background-color":"rgb(16, 151, 232)"}},{"id":"564ff6ff-69eb-46b4","text":"linkedList","stroke":"#ed9799","x":4605,"y":2976.5,"layout":null,"isExpand":true,"pid":"8bdb41f6-9fc2-4bbb"},{"id":"b9601e29-7594-3146","text":"quickList","stroke":"#ed9799","x":4605,"y":3027.5,"layout":null,"isExpand":true,"pid":"8bdb41f6-9fc2-4bbb"},{"id":"8b18a044-b92c-373d","text":"list场景","stroke":"#ed9799","x":4605,"y":3078.5,"layout":null,"isExpand":true,"pid":"7e7689ae-ed23-39c6"},{"id":"2a1aac0f-bd16-54ea","text":"创建","stroke":"#ed9799","x":4609,"y":3112.5,"layout":null,"isExpand":true,"pid":"951b47e5-97af-9324"},{"id":"cc6bf28a-725b-ea0f","text":"查询","stroke":"#ed9799","x":4609,"y":3213.5,"layout":null,"isExpand":true,"pid":"951b47e5-97af-9324"},{"id":"7b7b44cd-5a52-2a13","text":"更新","stroke":"#ed9799","x":4609,"y":3314.5,"layout":null,"isExpand":true,"pid":"951b47e5-97af-9324"},{"id":"656f3cb1-fcdc-a043","text":"删除","stroke":"#ed9799","x":4609,"y":3348.5,"layout":null,"isExpand":true,"pid":"951b47e5-97af-9324"},{"id":"c04f1a81-de2f-6a30","text":"intSet","stroke":"#ed9799","x":4609,"y":3417.5,"layout":null,"isExpand":true,"pid":"83b9d453-6e7d-ece5"},{"id":"707d6609-0b8f-44e5","text":"hashTable","stroke":"#ed9799","x":4609,"y":3486.5,"layout":null,"isExpand":true,"pid":"83b9d453-6e7d-ece5","style":{"background-color":"#B386B8"}},{"id":"544b5144-e2ad-fe9b","text":"去重","stroke":"#ed9799","x":4609,"y":3520.5,"layout":null,"isExpand":true,"pid":"06a60b11-a19b-5778"},{"id":"41894ecb-8ee7-5b2f","text":"HSET、HSETNX、HLEN、HDEL、HGETALL","stroke":"#ed9799","x":4620,"y":3554.5,"layout":null,"isExpand":true,"pid":"11f53334-aa5a-ea03"},{"id":"ff4dc135-581c-35f0","text":"ziplist","stroke":"#ed9799","x":4620,"y":3605.5,"layout":null,"isExpand":true,"pid":"dd67de97-be78-9283","style":{"background-color":"rgb(16, 151, 232)"}},{"id":"c5422061-f1c9-41e2","text":"hashTable","stroke":"#ed9799","x":4620,"y":3716,"layout":null,"isExpand":true,"pid":"dd67de97-be78-9283","style":{"background-color":"#B386B8"}},{"id":"e8f37981-e73e-f1a8","text":"字典场景，学生分数，任务分配等","stroke":"#ed9799","x":4620,"y":3809.5,"layout":null,"isExpand":true,"pid":"88304d65-e333-0674"},{"id":"7fc4eb9b-b26c-60ac","text":"表头中有used表示已经使用的节点数量","stroke":"#ed9799","x":4658,"y":3843.5,"layout":null,"isExpand":true,"pid":"5c0df425-61cd-a71c"},{"id":"77360cf4-73d1-484a","text":"size和sizemak，sizemask和哈希值一起决定索引","stroke":"#ed9799","x":4658,"y":3877.5,"layout":null,"isExpand":true,"pid":"5c0df425-61cd-a71c"},{"id":"9714a901-1bab-ad49","text":"table指向实际的hash存储","stroke":"#ed9799","x":4658,"y":3911.5,"layout":null,"isExpand":true,"pid":"5c0df425-61cd-a71c"},{"id":"f843d25e-c084-ce8d","text":"渐进式扩容，t0和t1","stroke":"#ed9799","x":4658,"y":3945.5,"layout":null,"isExpand":true,"pid":"305bc6c2-edc9-820b"},{"id":"299c2c63-f96b-81d3","text":"缩容，渐进式缩容","stroke":"#ed9799","x":4658,"y":3979.5,"layout":null,"isExpand":true,"pid":"305bc6c2-edc9-820b"},{"id":"66f6cb74-0222-8395","text":"多级索引","stroke":"#ed9799","x":4617,"y":4013.5,"layout":null,"isExpand":true,"pid":"4239920a-8b69-04e8"},{"id":"0d2a9adc-befd-22ec","text":"节点数据是score","stroke":"#ed9799","x":4617,"y":4047.5,"layout":null,"isExpand":true,"pid":"4239920a-8b69-04e8"},{"id":"877d6637-9ff5-5739","text":"表头定义了length，查询总数负载度为O(1)","stroke":"#ed9799","x":4617,"y":4081.5,"layout":null,"isExpand":true,"pid":"4239920a-8b69-04e8"},{"id":"c522987f-3b6c-4076","text":"是zset的底层数据结构","stroke":"#ed9799","x":4617,"y":4115.5,"layout":null,"isExpand":true,"pid":"11da8632-96c9-6644"},{"id":"7d94ac89-7c24-c50a","text":"随机化层数，5.0.5版本最高为64层","stroke":"#ed9799","x":4617,"y":4149.5,"layout":null,"isExpand":true,"pid":"fd4a3bd8-280b-a272"},{"id":"9a1dc790-d21c-5f43","text":"查询效率媲美二分查找，负载度为O(logN)","stroke":"#ed9799","x":4617,"y":4183.5,"layout":null,"isExpand":true,"pid":"fd4a3bd8-280b-a272"},{"id":"0bbd32bb-81f8-0705","text":"节点层高是创建时就确认了，不会被新插入节点影响","stroke":"#ed9799","x":4617,"y":4217.5,"layout":null,"isExpand":true,"pid":"fd4a3bd8-280b-a272","style":{"background-color":"red"}},{"id":"618e15b0-0f54-35d0","text":"创建","stroke":"#ed9799","x":4616,"y":4251.5,"layout":null,"isExpand":true,"pid":"0233fb55-7b2e-f48b"},{"id":"dd967974-8553-8224","text":"查询","stroke":"#ed9799","x":4616,"y":4285.5,"layout":null,"isExpand":true,"pid":"0233fb55-7b2e-f48b"},{"id":"dfa914e7-0f84-0ecd","text":"更新","stroke":"#ed9799","x":4616,"y":4319.5,"layout":null,"isExpand":true,"pid":"0233fb55-7b2e-f48b"},{"id":"e91eafa1-0e28-b747","text":"删除","stroke":"#ed9799","x":4616,"y":4353.5,"layout":null,"isExpand":true,"pid":"0233fb55-7b2e-f48b"},{"id":"6e535031-b723-a744","text":"Ziplist","stroke":"#ed9799","x":4616,"y":4387.5,"layout":null,"isExpand":true,"pid":"5b577f16-3d43-a06b","style":{"background-color":"rgb(16, 151, 232)"}},{"id":"2e748638-6b65-6cd7","text":"跳表+HashTable","stroke":"#ed9799","x":4616,"y":4421.5,"layout":null,"isExpand":true,"pid":"5b577f16-3d43-a06b","style":{"background-color":"#3E76A5"}},{"id":"a0ec5f6f-3f86-cf2d","text":"int","stroke":"#ed9799","x":4729,"y":2278.5,"layout":null,"isExpand":true,"pid":"bf974a10-0641-51e1","style":{}},{"id":"00658dd8-d1a6-7a5b","text":"embstr","stroke":"#ed9799","x":4729,"y":2312.5,"layout":null,"isExpand":true,"pid":"bf974a10-0641-51e1","style":{}},{"id":"01d4f765-8b20-c0f7","text":"raw","stroke":"#ed9799","x":4729,"y":2346.5,"layout":null,"isExpand":true,"pid":"bf974a10-0641-51e1","style":{}},{"id":"e82546c2-9a26-1b54","text":"SDS","stroke":"#ed9799","x":4792,"y":2465.5,"layout":null,"isExpand":true,"pid":"1c8ecd05-7cb8-0af3","style":{"background-color":"rgb(67, 160, 71)"}},{"id":"57d7391a-970d-f04a","text":"RedisObj","stroke":"#ed9799","x":4792,"y":2593.5,"layout":null,"isExpand":true,"pid":"1c8ecd05-7cb8-0af3"},{"id":"f6934b2f-e1a2-8a71","text":"优点","stroke":"#ed9799","x":4683,"y":2738.5,"layout":null,"isExpand":true,"pid":"9b034ddb-7c31-1966"},{"id":"302e2066-fd54-cd6d","text":"缺点","stroke":"#ed9799","x":4683,"y":2789.5,"layout":null,"isExpand":true,"pid":"9b034ddb-7c31-1966"},{"id":"3f44bd77-9c56-4c0b","text":"条件","stroke":"#ed9799","x":4683,"y":2857.5,"layout":null,"isExpand":true,"pid":"9b034ddb-7c31-1966"},{"id":"2012959a-680c-7caa","text":"结构","stroke":"#ed9799","x":4683,"y":2925.5,"layout":null,"isExpand":true,"pid":"9b034ddb-7c31-1966"},{"id":"c3bf6743-a1a3-05aa","text":"结构：表头定义了len，long类型，所以查询节点复杂度是O(1)","stroke":"#ed9799","x":4710,"y":2976.5,"layout":null,"isExpand":true,"pid":"564ff6ff-69eb-46b4"},{"id":"68e249bf-a995-2ae9","text":"结构","stroke":"#ed9799","x":4705,"y":3010.5,"layout":null,"isExpand":true,"pid":"b9601e29-7594-3146"},{"id":"c0aee706-0a24-6b74","text":"3.2版本以后用的都是quickList","stroke":"#ed9799","x":4705,"y":3044.5,"layout":null,"isExpand":true,"pid":"b9601e29-7594-3146","style":{"background-color":"#7ADD99"}},{"id":"5346db27-79b1-ba0a","text":"SADD","stroke":"#ed9799","x":4679,"y":3112.5,"layout":null,"isExpand":true,"pid":"2a1aac0f-bd16-54ea"},{"id":"315c64ea-01ab-e88a","text":"- SISMEMBR : 查询是否为成员\n - SISMEMBRS : 返回集合中所有成员的列表 \n        - SCCARD： 返回集合中成员个数\n        - SSCAN : 遍历，后面跟下标和count，还可以用match进行模糊查询\n        - SINTER : 以前面的集合判断交集\n        - SUNION：并集\n        - SDIFF：different 多个set的去重，以前面的为基准","stroke":"#ed9799","x":4679,"y":3146.5,"layout":null,"isExpand":true,"pid":"cc6bf28a-725b-ea0f"},{"id":"d5a8e2ce-e29c-bf0e","text":"SADD","stroke":"#ed9799","x":4679,"y":3314.5,"layout":null,"isExpand":true,"pid":"7b7b44cd-5a52-2a13"},{"id":"99db1fcf-e871-7658","text":"DEL","stroke":"#ed9799","x":4679,"y":3348.5,"layout":null,"isExpand":true,"pid":"656f3cb1-fcdc-a043"},{"id":"9031b987-98f2-60ae","text":"条件：如果集群元素都是整数，且元素数量不超过512个，就采用inset编码","stroke":"#ed9799","x":4688,"y":3382.5,"layout":null,"isExpand":true,"pid":"c04f1a81-de2f-6a30"},{"id":"4a4c2b2c-7163-3b4b","text":"特点：节约内存，但是查询的时候要用二分查找,也就是复杂度是o(logN)","stroke":"#ed9799","x":4688,"y":3434.5,"layout":null,"isExpand":true,"pid":"c04f1a81-de2f-6a30"},{"id":"b1bf7fd1-aa71-0862","text":"性能很高，O(1)复杂度下就能找到一个元素是否存在","stroke":"#ed9799","x":4720,"y":3486.5,"layout":null,"isExpand":true,"pid":"707d6609-0b8f-44e5"},{"id":"db3037d9-9796-0cbd","text":"和list里面的ziplist编码一样的条件","stroke":"#ed9799","x":4698,"y":3605.5,"layout":null,"isExpand":true,"pid":"ff4dc135-581c-35f0"},{"id":"77fcdeb2-b7fe-d848","text":"和Set中存储的区别在于，Set中的value始终为null，但是Hash里面是有值的","stroke":"#ed9799","x":4731,"y":3707,"layout":null,"isExpand":true,"pid":"c5422061-f1c9-41e2"},{"id":"63e2838a-72b0-bf13","text":"新节点","stroke":"#ed9799","x":4719,"y":4013.5,"layout":null,"isExpand":true,"pid":"66f6cb74-0222-8395"},{"id":"9de6898f-c20d-615b","text":"score可以重复，增加了回退指针","stroke":"#ed9799","x":4774,"y":4047.5,"layout":null,"isExpand":true,"pid":"0d2a9adc-befd-22ec"},{"id":"33baf4ba-41c1-a4cc","text":"ZADD","stroke":"#ed9799","x":4686,"y":4251.5,"layout":null,"isExpand":true,"pid":"618e15b0-0f54-35d0"},{"id":"5dd4a48d-328d-6858","text":"ZRANGE,ZCOUNT,ZRANK","stroke":"#ed9799","x":4686,"y":4285.5,"layout":null,"isExpand":true,"pid":"dd967974-8553-8224"},{"id":"9113ab78-507d-021a","text":"ZADD,ZREM","stroke":"#ed9799","x":4686,"y":4319.5,"layout":null,"isExpand":true,"pid":"dfa914e7-0f84-0ecd"},{"id":"3024dd43-cb21-ea3d","text":"DEL,UNLINK","stroke":"#ed9799","x":4686,"y":4353.5,"layout":null,"isExpand":true,"pid":"e91eafa1-0e28-b747"},{"id":"d7542ecc-ae85-baeb","text":"看上面的条件吧","stroke":"#ed9799","x":4696,"y":4387.5,"layout":null,"isExpand":true,"pid":"6e535031-b723-a744"},{"id":"fdec5155-c3ef-dace","text":"这里是搭配使用","stroke":"#ed9799","x":4771,"y":4421.5,"note":"","layout":null,"isExpand":true,"pid":"2e748638-6b65-6cd7"},{"id":"774c77b6-7b2d-81e2","text":"数字，占空间小","stroke":"#ed9799","x":4784,"y":2278.5,"layout":null,"isExpand":true,"pid":"a0ec5f6f-3f86-cf2d","style":{}},{"id":"1f1c2cef-1d8e-e411","text":"一次性分配地址，占内存小，任何写操作后都变成Raw","stroke":"#ed9799","x":4816,"y":2312.5,"layout":null,"isExpand":true,"pid":"00658dd8-d1a6-7a5b","style":{}},{"id":"e0daf19f-ced7-3b81","text":"sds和RedisObj分开,阈值44","stroke":"#ed9799","x":4793,"y":2346.5,"layout":null,"isExpand":true,"pid":"01d4f765-8b20-c0f7","style":{}},{"id":"d65719ca-40ab-9e18","text":"字节头","stroke":"#ed9799","x":4863,"y":2431.5,"layout":null,"isExpand":true,"pid":"e82546c2-9a26-1b54"},{"id":"72ef8590-da95-d937","text":"内容buf,用来保存字符串","stroke":"#ed9799","x":4863,"y":2516.5,"layout":null,"isExpand":true,"pid":"e82546c2-9a26-1b54"},{"id":"99fcaa40-ffd0-36b0","text":"分类","stroke":"#ed9799","x":4863,"y":2550.5,"layout":null,"isExpand":true,"pid":"e82546c2-9a26-1b54"},{"id":"6574390a-7958-f96b","text":"用来存储type、和encoding，其中encodeing表示三种编码的一种","stroke":"#ed9799","x":4896,"y":2584.5,"layout":null,"isExpand":true,"pid":"57d7391a-970d-f04a"},{"id":"2103f220-7139-f1e2","text":"内存占用小","stroke":"#ed9799","x":4753,"y":2738.5,"layout":null,"isExpand":true,"pid":"f6934b2f-e1a2-8a71"},{"id":"0b7e366b-5a9f-fd2f","text":"更新成本高，所有数据移动","stroke":"#ed9799","x":4753,"y":2772.5,"layout":null,"isExpand":true,"pid":"302e2066-fd54-cd6d"},{"id":"7d51bce0-17cb-f8d6","text":"连锁更新","stroke":"#ed9799","x":4753,"y":2806.5,"layout":null,"isExpand":true,"pid":"302e2066-fd54-cd6d"},{"id":"d48827c0-06ca-0086","text":"元素数量小于512个","stroke":"#ed9799","x":4753,"y":2840.5,"layout":null,"isExpand":true,"pid":"3f44bd77-9c56-4c0b"},{"id":"3e4607af-69fb-d005","text":"字符串对象长度小于64字节","stroke":"#ed9799","x":4753,"y":2874.5,"layout":null,"isExpand":true,"pid":"3f44bd77-9c56-4c0b"},{"id":"800b7e22-9554-c715","text":"zllen：2个字节长度以内，查询节点个数O(1)","stroke":"#ed9799","x":4753,"y":2908.5,"layout":null,"isExpand":true,"pid":"2012959a-680c-7caa"},{"id":"430a7e99-0cd1-843c","text":"entry：实际数据","stroke":"#ed9799","x":4753,"y":2942.5,"layout":null,"isExpand":true,"pid":"2012959a-680c-7caa"},{"id":"e69250b5-6da7-80be","text":"linkedlist的结构，里面储存的是ziplist","stroke":"#ed9799","x":4775,"y":3010.5,"layout":null,"isExpand":true,"pid":"68e249bf-a995-2ae9"},{"id":"7e2e76cc-8ee3-e43c","text":"元素数量小于512个","stroke":"#ed9799","x":4971,"y":3588.5,"layout":null,"isExpand":true,"pid":"db3037d9-9796-0cbd"},{"id":"4293bab3-a1af-a541","text":"字符串对象长度小于64字节","stroke":"#ed9799","x":4971,"y":3622.5,"layout":null,"isExpand":true,"pid":"db3037d9-9796-0cbd"},{"id":"9a58fcef-04f3-ff15","text":"![[Paste image 1705934150311image.png]]","stroke":"#ed9799","x":5211,"y":3656.5,"layout":null,"isExpand":true,"pid":"77fcdeb2-b7fe-d848"},{"id":"4051b26d-f0e8-a8cf","text":"len保存长度","stroke":"#ed9799","x":4949,"y":2380.5,"layout":null,"isExpand":true,"pid":"d65719ca-40ab-9e18"},{"id":"50a9e3a7-8b5b-5034","text":"预留空间 alloc - len","stroke":"#ed9799","x":4949,"y":2414.5,"main":false,"layout":{"layoutName":"mindmap2","direct":"right"},"isExpand":true,"pid":"d65719ca-40ab-9e18"},{"id":"63dd8c0c-49ab-44a2","text":"二进制安全--不用/0为结尾，用len判断就行","stroke":"#ed9799","x":4949,"y":2448.5,"layout":null,"isExpand":true,"pid":"d65719ca-40ab-9e18"},{"id":"677bcb72-d5ec-d5ac","text":"flags:这个用来表示分类，比如sdshdr8","stroke":"#ed9799","x":4949,"y":2482.5,"layout":null,"isExpand":true,"pid":"d65719ca-40ab-9e18"},{"id":"d2209e53-ded8-bf4b","text":"有sdshdr 8, sdshdr 16等","stroke":"#ed9799","x":4933,"y":2550.5,"layout":null,"isExpand":true,"pid":"99fcaa40-ffd0-36b0"},{"id":"d5576a78-cd2b-f780","text":"这一点在Redis7.0中使用listPack优化掉了ziplist","stroke":"#ed9799","x":4855,"y":2806.5,"layout":null,"isExpand":true,"pid":"7d51bce0-17cb-f8d6","style":{"background-color":"orange"}},{"id":"bbcea65d-326b-4fc9","text":"里面有结构是prevlen，造成连锁更新的原因","stroke":"#ed9799","x":4907,"y":2942.5,"layout":null,"isExpand":true,"pid":"430a7e99-0cd1-843c"}]],"induceData":[{"induceData":{"nodeId":"f843d25e-c084-ce8d","endNodeId":"299c2c63-f96b-81d3","stroke":"#666","root":"b569c3ce-c162-7626","lineType":"solid","id":1705936557923,"range":"0,1","type":"right"},"mindData":[{"id":"b569c3ce-c162-7626","text":"负载因子","x":4835,"y":3962.5,"layout":null,"isExpand":true,"stroke":""}]}],"wireFrameData":[],"relateLinkData":[{"startNodeId":"f5760da2-9625-c7c0","endNodeId":"707d6609-0b8f-44e5","color":"#f06","width":2,"nodeData":{"id":"5e413f3b-95c9-5301","text":"","nodeType":"relateLink","backgroundColor":"#f06","mdText":"","x":4470.61865234375,"y":3664.2802734375,"layout":null,"isExpand":true,"stroke":""},"type":"bs","dashArray":[0],"nodeHide":false,"startMarker":"circle","endMarker":"arrow","startDirect":"top","endDirect":"left","startDx":0.5802469135802469,"startDy":-0.25,"endDx":-0.06584362139918444,"endDy":0.5277777777779799,"gapsx":66.91666666666697,"gapsy":71.83333333333303,"gapex":-250.41666666666697,"gapey":1.1666666666669698,"box":{"x":4524,"y":3905.5,"x1":4603.666666666666,"y1":3499.1666666666715,"cpx1":4543.916666666667,"cpy1":3983.333333333333,"cpx2":4358.583333333333,"cpy2":3487.666666666667,"startDirect":"","startDx":0,"startDy":0,"endDirect":"","endDx":0,"endDy":0},"entryDirection":[0,-1],"exitDirection":[-1,0]},{"startNodeId":"ff4dc135-581c-35f0","endNodeId":"9b034ddb-7c31-1966","color":"#f06","width":2,"nodeData":{"id":"d82d93e6-32ca-af5c","text":"","nodeType":"relateLink","backgroundColor":"#f06","x":4495.5595703125,"y":3209.957275390625,"layout":null,"isExpand":true,"stroke":"","mdText":""},"type":"bs","dashArray":[0],"nodeHide":false,"startMarker":"circle","endMarker":"arrow","startDirect":"top","endDirect":"bottom","startDx":0.4583333333333333,"startDy":-0.25,"endDx":0.01388888888883836,"endDy":1.1666666666666476,"gapsx":17.5,"gapsy":-125.41666666666652,"gapex":-301.5,"gapey":189.91666666666652,"box":{"x":4642,"y":3599.5,"x1":4605.666666666664,"y1":2868.4999999999995,"cpx1":4637.5,"cpy1":3480.0833333333335,"cpx2":4303.5,"cpy2":3030.4166666666665,"startDirect":"","startDx":0,"startDy":0,"endDirect":"","endDx":0,"endDy":0},"entryDirection":[0,-1],"exitDirection":[0,1]},{"startNodeId":"6e535031-b723-a744","endNodeId":"ff4dc135-581c-35f0","color":"#f06","width":2,"nodeData":{"id":"0a68d3ba-5a50-01cd","text":"","nodeType":"relateLink","backgroundColor":"#f06","mdText":"","x":4407.12158203125,"y":4006.881591796875,"layout":null,"isExpand":true,"stroke":""},"type":"bs","dashArray":[0],"nodeHide":false,"startMarker":"circle","endMarker":"arrow","startDirect":"left","endDirect":"leftbottom","startDx":-0.12,"startDy":0.5416666666666666,"endDx":-0.125,"endDy":1.25,"gapsx":-153.16666666666697,"gapsy":-71.25,"gapex":-371.83333333333303,"gapey":340.75,"box":{"x":4610,"y":4400.5,"x1":4614,"y1":3635.5,"cpx1":4462.833333333333,"cpy1":4316.25,"cpx2":4248.166666666667,"cpy2":3946.25,"startDirect":"","startDx":0,"startDy":0,"endDirect":"","endDx":0,"endDy":0},"entryDirection":[-1,0],"exitDirection":[-1,0]}],"calloutData":[]}
```
