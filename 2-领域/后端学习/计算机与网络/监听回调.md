---
created: 2024-01-28
updated: 2024-01-28
Type: knowledge
Status: ⌛️ 等待
tags:
---
##  监听和回调的概念

监听和回调本质就是对象对事件的处理方式：
	1. 监听是**处理者**不断监视是否有对应事件发生，当有事件发生时就采取相应的处理事件的措施，
	2. 回调是事件发生后通过通过**事件**主动调用目标对象处理方法来处理事件的方式（这也属于一种通信方式）
实际上就是处理事务的主体不一样了，承担该责任的人不一样，产生的效果是一样的，但是很明显，回调产生的消耗会更少

## 中断
监听和回调都是为了处理多任务的一种处理方式，而**中断是多任务处理的具体实现。**
我们知道，在计算机中管理的外围设备很多，管理起来非常复杂，并且这种管理的过程本身就是多任务的。**因为外设输入的不确定性，处理器需要一种机制，当外设有输入请求时立即处理这种请求。**

为什么要立即处理外设请求呢？如果不立即处理的话，举个例子，==键盘必须要等到计算机处理完正在进行的任务时才能输入。另一方面，诸如网卡这一类的设备，存在一个缓冲区，也就造成了网卡数据是有声明周期的，如果不立即处理，后边来的网络数据会由于缓冲区满了而导致前边的数据丢失==。

不用多说，对构造这样一个系统，**回调的方式才是最好的**，有外围设备信号时，直接通过一种机制来调用 CPU（如果抽象的够好的话，cpu 可以看作一个可调用函数，我们只管往这个函数填充任务序列作为参数）执行处理的代码即可

但是实际上，CPU 是不支持回调这种操作的，**因为 CPU 是个只管读 IP 寄存器并且执行指令的傻子**

so，中断就是为了解决这个问题产生的。

> **中断的执行流程其实很简单：在CPU接受到事件的“回调”指令时，会通过中断来打断正在进行的任务的执行，并且将目前的一些任务数据保存起来，然后CPU会跳转执行中断处理的函数，当中断处理函数执行完毕后，CPU又会把刚刚保存的任务数据恢复，并且紧接着执行刚刚的任务**

而中断打断CPU的执行是CPU本身支持的功能。